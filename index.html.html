<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyMate - Advanced Note-Taking App</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Kalam&family=Roboto:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            /* Default theme (Light) */
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --bg-color: #f9f9f9;
            --text-color: #2d3436;
            --border-color: #dfe6e9;
            --highlight-color: #ffeaa7;
            --panel-bg: #ffffff;
            --sidebar-bg: #ffffff;
            --editor-bg: #ffffff;
            --pdf-width: 40%;
            --video-height: 60%;
        }

        /* Color Themes */
        .theme-light {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --bg-color: #f9f9f9;
            --text-color: #2d3436;
            --border-color: #e0e0e0;
            --highlight-color: #f5f5f5;
            --panel-bg: #ffffff;
            --sidebar-bg: #ffffff;
            --editor-bg: #ffffff;
        }

        .theme-sepia {
            --primary-color: #8b5a2b;
            --secondary-color: #d2b48c;
            --bg-color: #f4ecd8;
            --text-color: #5b4636;
            --border-color: #d2b48c;
            --highlight-color: #f0e0b0;
            --panel-bg: #f8f1e5;
            --sidebar-bg: #f8f1e5;
            --editor-bg: #fff8e8;
        }

        .theme-green {
            --primary-color: #2e7d32;
            --secondary-color: #66bb6a;
            --bg-color: #e8f5e9;
            --text-color: #1b5e20;
            --border-color: #a5d6a7;
            --highlight-color: #c8e6c9;
            --panel-bg: #f1f8e9;
            --sidebar-bg: #f1f8e9;
            --editor-bg: #ffffff;
        }

        .theme-blue {
            --primary-color: #1565c0;
            --secondary-color: #42a5f5;
            --bg-color: #e3f2fd;
            --text-color: #0d47a1;
            --border-color: #90caf9;
            --highlight-color: #bbdefb;
            --panel-bg: #e8f4fc;
            --sidebar-bg: #e8f4fc;
            --editor-bg: #ffffff;
        }

        .theme-pink {
            --primary-color: #ad1457;
            --secondary-color: #ec407a;
            --bg-color: #fce4ec;
            --text-color: #880e4f;
            --border-color: #f48fb1;
            --highlight-color: #f8bbd0;
            --panel-bg: #fce8f1;
            --sidebar-bg: #fce8f1;
            --editor-bg: #ffffff;
        }

        .theme-dark {
            --primary-color: #a29bfe;
            --secondary-color: #6c5ce7;
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --border-color: #424242;
            --highlight-color: #1e1e1e;
            --panel-bg: #1e1e1e;
            --sidebar-bg: #1e1e1e;
            --editor-bg: #2d2d2d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Patrick Hand', cursive;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            overflow: hidden;
            height: 100vh;
        }

        body.fullscreen-mode {
            overflow: auto;
        }

        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
        }

        /* Sidebar styles */
        .sidebar {
            width: 250px;
            background-color: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 10;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar-hidden {
            transform: translateX(-100%);
            position: absolute;
            height: 100%;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .sidebar-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .close-sidebar {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .sidebar-section {
            margin-bottom: 20px;
        }

        .sidebar-section h3 {
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .sidebar-btn {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: white;
            font-family: inherit;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .sidebar-btn i {
            margin-right: 8px;
        }

        .sidebar-btn:hover {
            background-color: var(--primary-color);
        }

        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
        }

        .sidebar-tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .sidebar-tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .sidebar-content {
            display: none;
        }

        .sidebar-content.active {
            display: block;
        }

        .saved-notes-list {
            max-height: 300px;
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
        }

        .saved-notes-list::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .saved-note-item {
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .saved-note-item:hover {
            background-color: var(--secondary-color);
            color: white;
        }

        .item-actions {
            display: flex;
            gap: 5px;
        }

        .item-delete {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
        }

        /* Main content styles */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Top bar styles */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border-color);
            z-index: 5;
        }

        .menu-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .app-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .top-bar-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-selector, .font-selector, .fullscreen-toggle, .layout-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 1rem;
            font-family: inherit;
            padding: 5px 10px;
            border-radius: 5px;
            background-color: var(--highlight-color);
        }

        .fullscreen-toggle.active {
            color: var(--primary-color);
            font-weight: bold;
        }

        /* Triple view container */
        .triple-view {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* PDF viewer (right side, custom width) */
        .pdf-viewer-section {
            flex: 0 0 var(--pdf-width);
            padding: 15px;
            overflow: auto;
            background-color: var(--panel-bg);
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--border-color);
            position: relative;
            transition: flex 0.3s ease;
            scrollbar-width: none; /* Firefox */
        }

        .pdf-viewer-section::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .pdf-resize-handle {
            width: 10px;
            height: 100%;
            position: absolute;
            left: -5px;
            top: 0;
            cursor: col-resize;
            z-index: 10;
        }

        .pdf-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .pdf-control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .pdf-control-btn:hover {
            background-color: var(--primary-color);
        }

        .pdf-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--highlight-color);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }

        .pdf-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Split view for Video and Notes (left side) */
        .video-notes-split {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Video viewer (top, custom height) */
        .video-viewer {
            flex: 0 0 var(--video-height);
            padding: 15px;
            overflow: auto;
            background-color: var(--panel-bg);
            display: flex;
            flex-direction: column;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            transition: flex 0.3s ease;
            scrollbar-width: none; /* Firefox */
        }

        .video-viewer::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .video-resize-handle {
            height: 10px;
            width: 100%;
            position: absolute;
            bottom: -5px;
            left: 0;
            cursor: row-resize;
            z-index: 10;
        }

        .video-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .video-control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .video-control-btn:hover {
            background-color: var(--primary-color);
        }

        .video-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--highlight-color);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            aspect-ratio: 16/9; /* Standard video aspect ratio */
        }

        .video-player {
            width: 100%;
            height: 100%;
        }

        .youtube-player {
            width: 100%;
            height: 100%;
        }

        /* Notes panel (bottom) */
        .notes-panel {
            flex: 1;
            padding: 15px;
            overflow: auto;
            background-color: var(--panel-bg);
            display: flex;
            flex-direction: column;
            scrollbar-width: none; /* Firefox */
        }

        .notes-panel::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .notes-title {
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .formatting-toolbar {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }

        .format-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 3px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .format-btn:hover {
            background-color: var(--primary-color);
        }

        .notes-editor {
            flex: 1;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            outline: none;
            font-family: inherit;
            font-size: 1.1rem;
            line-height: 1.6;
            resize: none;
            overflow-y: auto;
            background-color: var(--editor-bg);
            transition: all 0.3s ease;
            min-height: 200px;
            scrollbar-width: none; /* Firefox */
        }

        .notes-editor::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .notes-footer {
            display: flex;
            justify-content: flex-end;
            margin-top: 15px;
            gap: 10px;
        }

        .save-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: var(--primary-color);
            color: white;
            font-family: inherit;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .save-btn:hover {
            background-color: var(--secondary-color);
        }

        .save-btn:disabled {
            background-color: var(--border-color);
            cursor: not-allowed;
        }

        .empty-state {
            text-align: center;
            padding: 20px;
            color: var(--text-color);
            opacity: 0.7;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        /* Fullscreen styles */
        .fullscreen-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 5;
        }

        .fullscreen-btn:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }

        .fullscreen-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--panel-bg);
            z-index: 1000;
            display: none;
            flex-direction: column;
        }

        .fullscreen-header {
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .fullscreen-title {
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .exit-fullscreen-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .fullscreen-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-family: inherit;
            background-color: var(--editor-bg);
            color: var(--text-color);
        }

        .input-range {
            width: 100%;
            margin-top: 10px;
        }

        .range-value {
            display: inline-block;
            margin-left: 10px;
            min-width: 30px;
            text-align: right;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
        }

        .modal-btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .modal-btn-secondary {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        /* Flip button */
        .flip-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .flip-btn:hover {
            background-color: var(--primary-color);
        }

        /* NEET Schedule Feature Styles */
        .schedule-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--panel-bg);
            z-index: 1000;
            flex-direction: column;
            overflow: hidden;
        }

        .schedule-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .schedule-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-schedule {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .schedule-content {
            flex: 1;
            display: flex;
            overflow: hidden;
            padding: 20px;
            gap: 20px;
        }

        .schedule-sidebar {
            width: 300px;
            background-color: var(--sidebar-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            overflow-y: auto;
        }

        .schedule-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow: hidden;
        }

        .schedule-calendar {
            background-color: var(--sidebar-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            flex: 0 0 300px;
            overflow-y: auto;
        }

        .schedule-classes {
            flex: 1;
            background-color: var(--sidebar-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            overflow-y: auto;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-nav-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }

        .calendar-month {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 15px;
        }

        .calendar-day-header {
            text-align: center;
            padding: 5px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .calendar-day {
            text-align: center;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-day:hover {
            background-color: var(--highlight-color);
        }

        .calendar-day.active {
            background-color: var(--primary-color);
            color: white;
        }

        .calendar-day.has-class {
            position: relative;
        }

        .calendar-day.has-class::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background-color: var(--primary-color);
            border-radius: 50%;
        }

        .calendar-day.has-class.active::after {
            background-color: white;
        }

        .calendar-day.other-month {
            color: var(--border-color);
        }

        .class-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            font-weight: bold;
            color: var(--primary-color);
        }

        .subject-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .subject-btn {
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--panel-bg);
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .subject-btn:hover {
            border-color: var(--secondary-color);
        }

        .subject-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        .subject-btn.biology {
            border-color: #4CAF50;
        }

        .subject-btn.biology.active {
            background-color: #4CAF50;
            color: white;
        }

        .subject-btn.chemistry {
            border-color: #2196F3;
        }

        .subject-btn.chemistry.active {
            background-color: #2196F3;
            color: white;
        }

        .subject-btn.physics {
            border-color: #FF9800;
        }

        .subject-btn.physics.active {
            background-color: #FF9800;
            color: white;
        }

        .class-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .class-action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
        }

        .save-class-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .clear-class-btn {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        .classes-list {
            margin-top: 20px;
        }

        .class-item {
            background-color: var(--panel-bg);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
            position: relative;
        }

        .class-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .class-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .class-date {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .class-subject {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
        }

        .class-subject.biology {
            background-color: #4CAF50;
        }

        .class-subject.chemistry {
            background-color: #2196F3;
        }

        .class-subject.physics {
            background-color: #FF9800;
        }

        .class-title {
            font-size: 1rem;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .class-description {
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 10px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .class-video {
            position: relative;
            margin-bottom: 10px;
            border-radius: 5px;
            overflow: hidden;
        }

        .class-video-thumbnail {
            width: 100%;
            height: 120px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .class-video-thumbnail:hover {
            transform: scale(1.02);
        }

        .class-play-btn, .class-delete-btn, .class-edit-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .class-play-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .class-edit-btn {
            background-color: #FF9800;
            color: white;
        }

        .class-delete-btn {
            background-color: #ff5252;
            color: white;
        }

        /* Three-dot menu for class items */
        .class-menu {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
        }

        .class-menu-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .class-menu-toggle:hover {
            background-color: var(--highlight-color);
        }

        .class-menu-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            min-width: 150px;
            z-index: 100;
        }

        .class-menu-dropdown.show {
            display: block;
        }

        .class-menu-item {
            padding: 10px 15px;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            color: var(--text-color);
            font-family: inherit;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }

        .class-menu-item:hover {
            background-color: var(--highlight-color);
        }

        .class-menu-item.delete {
            color: #ff5252;
        }

        .today-classes {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .today-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .today-title {
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .no-classes {
            text-align: center;
            padding: 20px;
            color: var(--text-color);
            opacity: 0.6;
        }

        .no-classes i {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        /* Schedule Button in Top Bar */
        .schedule-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            font-size: 1rem;
            font-family: inherit;
            padding: 5px 10px;
            border-radius: 5px;
            background-color: var(--highlight-color);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Homepage Dashboard Styles */
        .homepage-dashboard {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .dashboard-section {
            background-color: var(--panel-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dashboard-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .view-all-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-all-btn:hover {
            background-color: var(--primary-color);
        }

        .classes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .class-card {
            background-color: var(--sidebar-bg);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
        }

        .class-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .class-card-thumbnail {
            width: 100%;
            height: 140px;
            object-fit: cover;
            cursor: pointer;
        }

        .class-card-content {
            padding: 15px;
        }

        .class-card-subject {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
            margin-bottom: 8px;
        }

        .class-card-title {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--text-color);
            line-height: 1.3;
        }

        .class-card-date {
            font-size: 0.9rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        .class-card-description {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .class-card-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .class-card-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .play-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .edit-btn {
            background-color: #FF9800;
            color: white;
        }

        .details-btn {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        /* Previous Classes Section */
        .previous-classes-btn {
            background-color: #9c27b0;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
        }

        .previous-classes-btn:hover {
            background-color: #7b1fa2;
        }

        /* Upcoming Classes Styles */
        .upcoming-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--panel-bg);
            z-index: 1000;
            flex-direction: column;
        }

        .upcoming-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .upcoming-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-upcoming {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .upcoming-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .upcoming-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 15px;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--panel-bg);
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn:hover {
            border-color: var(--secondary-color);
        }

        .filter-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        .upcoming-classes-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .upcoming-class-item {
            background-color: var(--sidebar-bg);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.2s;
            position: relative;
        }

        .upcoming-class-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .upcoming-class-date {
            min-width: 120px;
            text-align: center;
            background-color: var(--highlight-color);
            padding: 10px;
            border-radius: 5px;
        }

        .upcoming-class-day {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .upcoming-class-month {
            font-size: 0.9rem;
            color: var(--text-color);
        }

        .upcoming-class-details {
            flex: 1;
        }

        .upcoming-class-subject {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
        }

        .upcoming-class-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--text-color);
        }

        .upcoming-class-description {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .upcoming-class-actions {
            display: flex;
            gap: 10px;
        }

        /* Course Creator Styles */
        .course-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--panel-bg);
            z-index: 1000;
            flex-direction: column;
        }

        .course-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .course-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-course {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .course-content {
            flex: 1;
            display: flex;
            padding: 20px;
            gap: 20px;
            overflow: hidden;
        }

        .course-sidebar {
            width: 300px;
            background-color: var(--sidebar-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            overflow-y: auto;
        }

        .course-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow: hidden;
        }

        .course-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .course-list {
            flex: 1;
            background-color: var(--sidebar-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            overflow-y: auto;
        }

        .course-viewer {
            flex: 1;
            background-color: var(--sidebar-bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            overflow-y: auto;
            display: none;
        }

        .course-item {
            background-color: var(--panel-bg);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .course-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .course-item.active {
            border-color: var(--primary-color);
            background-color: var(--highlight-color);
        }

        .course-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .course-item-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .course-item-subject {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
        }

        .course-item-description {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .course-item-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--secondary-color);
            margin-top: 10px;
        }

        .course-item-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .course-item-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        /* Course menu styles */
        .course-menu {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
        }

        .course-menu-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .course-menu-toggle:hover {
            background-color: var(--highlight-color);
        }

        .course-menu-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            min-width: 150px;
            z-index: 100;
        }

        .course-menu-dropdown.show {
            display: block;
        }

        .course-menu-item {
            padding: 10px 15px;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            color: var(--text-color);
            font-family: inherit;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }

        .course-menu-item:hover {
            background-color: var(--highlight-color);
        }

        .course-menu-item.delete {
            color: #ff5252;
        }

        .lecture-list {
            margin-top: 20px;
        }

        .lecture-item {
            background-color: var(--panel-bg);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s;
            position: relative;
        }

        .lecture-item:hover {
            border-color: var(--primary-color);
        }

        .lecture-number {
            width: 30px;
            height: 30px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .lecture-details {
            flex: 1;
        }

        .lecture-title {
            font-weight: bold;
            margin-bottom: 5px;
            line-height: 1.2;
        }

        .lecture-description {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
            line-height: 1.3;
        }

        .lecture-actions {
            display: flex;
            gap: 5px;
        }

        .lecture-play-btn, .lecture-edit-btn, .lecture-delete-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .lecture-play-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .lecture-edit-btn {
            background-color: #FF9800;
            color: white;
        }

        .lecture-delete-btn {
            background-color: #ff5252;
            color: white;
        }

        /* Lecture menu styles */
        .lecture-menu {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
        }

        .lecture-menu-toggle {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-color);
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .lecture-menu-toggle:hover {
            background-color: var(--highlight-color);
        }

        .lecture-menu-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            min-width: 150px;
            z-index: 100;
        }

        .lecture-menu-dropdown.show {
            display: block;
        }

        .lecture-menu-item {
            padding: 10px 15px;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            color: var(--text-color);
            font-family: inherit;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }

        .lecture-menu-item:hover {
            background-color: var(--highlight-color);
        }

        .lecture-menu-item.delete {
            color: #ff5252;
        }

        /* Recycle Bin Styles */
        .recycle-bin-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--panel-bg);
            z-index: 1000;
            flex-direction: column;
        }

        .recycle-bin-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .recycle-bin-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-recycle-bin {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .recycle-bin-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .recycle-bin-empty {
            text-align: center;
            padding: 40px;
            color: var(--text-color);
            opacity: 0.6;
        }

        .recycle-bin-empty i {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
        }

        .deleted-course-item {
            background-color: var(--panel-bg);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .deleted-course-details {
            flex: 1;
        }

        .deleted-course-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 5px;
        }

        .deleted-course-info {
            font-size: 0.9rem;
            color: var(--secondary-color);
            display: flex;
            gap: 15px;
        }

        .deleted-course-actions {
            display: flex;
            gap: 10px;
        }

        .restore-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .permanent-delete-btn {
            background-color: #ff5252;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Homepage Buttons */
        .homepage-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .homepage-btn {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background-color: var(--secondary-color);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .homepage-btn:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .homepage-btn i {
            font-size: 2rem;
        }

        /* Dashboard Switch Buttons */
        .dashboard-switch {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .switch-btn {
            padding: 10px 20px;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--panel-bg);
            color: var(--text-color);
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s;
        }

        .switch-btn:hover {
            border-color: var(--secondary-color);
        }

        .switch-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        /* Edit Modal Styles */
        .edit-course-modal, .edit-class-modal, .edit-lecture-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .edit-course-modal-content, .edit-class-modal-content, .edit-lecture-modal-content {
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .edit-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .edit-modal-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }

        .close-edit-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        /* Responsive styles */
        @media (max-width: 1024px) {
            .triple-view {
                flex-direction: column;
            }

            .pdf-viewer-section {
                flex: 0 0 40%;
                border-left: none;
                border-top: 1px solid var(--border-color);
            }

            .video-notes-split {
                flex: 1;
            }

            .schedule-content, .course-content {
                flex-direction: column;
            }

            .schedule-sidebar, .course-sidebar {
                width: 100%;
                flex: 0 0 auto;
            }

            .schedule-calendar {
                flex: 0 0 auto;
            }

            .classes-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .upcoming-class-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .upcoming-class-date {
                min-width: 100px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 80%;
                position: absolute;
                height: 100%;
                z-index: 20;
            }

            .pdf-viewer-section {
                flex: 0 0 50%;
            }

            .subject-selector {
                grid-template-columns: repeat(1, 1fr);
            }

            .calendar-grid {
                gap: 3px;
            }

            .calendar-day {
                padding: 5px;
                font-size: 0.9rem;
            }

            .classes-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .homepage-btn {
                min-width: 150px;
            }

            .dashboard-switch {
                flex-direction: column;
            }

            .class-actions, .course-item-actions, .lecture-actions {
                flex-wrap: wrap;
            }

            .class-play-btn, .class-edit-btn, .class-delete-btn,
            .course-item-btn, .lecture-play-btn, .lecture-edit-btn, .lecture-delete-btn {
                font-size: 0.8rem;
                padding: 4px 8px;
            }
        }

        /* Font classes */
        .font-patrick-hand {
            font-family: 'Patrick Hand', cursive;
        }

        .font-kalam {
            font-family: 'Kalam', cursive;
        }

        .font-bold {
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
        }
    </style>
</head>
<body class="theme-light">
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar sidebar-hidden">
            <div class="sidebar-header">
                <div class="sidebar-title">StudyMate</div>
                <button class="close-sidebar">&times;</button>
            </div>
            
            <div class="sidebar-tabs">
                <div class="sidebar-tab active" data-tab="home">Home</div>
                <div class="sidebar-tab" data-tab="media">Media</div>
            </div>
            
            <div class="sidebar-content active" id="home-tab">
                <div class="sidebar-section">
                    <button class="sidebar-btn" id="home-btn">
                        <i class="fas fa-home"></i> Refresh Home
                    </button>
                    <button class="sidebar-btn" id="dashboard-btn">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </button>
                    <button class="sidebar-btn" id="previous-classes-btn">
                        <i class="fas fa-history"></i> Previous Classes
                    </button>
                    <button class="sidebar-btn" id="upcoming-btn">
                        <i class="fas fa-calendar"></i> Upcoming Classes
                    </button>
                    <button class="sidebar-btn" id="course-btn">
                        <i class="fas fa-graduation-cap"></i> Course Creator
                    </button>
                    <button class="sidebar-btn" id="recycle-bin-btn">
                        <i class="fas fa-trash-restore"></i> Recycle Bin
                    </button>
                </div>
            </div>
            
            <div class="sidebar-content" id="media-tab">
                <div class="sidebar-section">
                    <button class="sidebar-btn" id="open-pdf-btn">
                        <i class="fas fa-file-pdf"></i> Open PDF
                    </button>
                    <button class="sidebar-btn" id="open-video-btn">
                        <i class="fas fa-video"></i> Open Video
                    </button>
                    <button class="sidebar-btn" id="open-youtube-btn">
                        <i class="fab fa-youtube"></i> YouTube Video
                    </button>
                </div>
                
                <div class="sidebar-section">
                    <h3>Saved Notes</h3>
                    <div class="saved-notes-list" id="saved-notes-list">
                        <!-- Saved notes will appear here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <button class="menu-btn" id="menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="app-title">StudyMate</div>
                <div class="top-bar-actions">
                    <select class="theme-selector" id="theme-selector">
                        <option value="light">Light</option>
                        <option value="sepia">Sepia</option>
                        <option value="green">Green</option>
                        <option value="blue">Blue</option>
                        <option value="pink">Pink</option>
                        <option value="dark">Dark</option>
                    </select>
                    <select class="font-selector" id="font-selector">
                        <option value="patrick-hand">Patrick Hand</option>
                        <option value="kalam">Kalam</option>
                        <option value="bold">Bold</option>
                    </select>
                    <button class="schedule-toggle" id="schedule-toggle">
                        <i class="fas fa-calendar-alt"></i> Schedule
                    </button>
                    <button class="flip-btn" id="flip-btn">
                        <i class="fas fa-exchange-alt"></i> Flip Layout
                    </button>
                    <button class="fullscreen-toggle" id="fullscreen-toggle">
                        <i class="fas fa-expand"></i> Fullscreen
                    </button>
                </div>
            </div>
            
            <!-- Homepage Dashboard -->
            <div class="homepage-dashboard" id="homepage-dashboard">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <i class="fas fa-tachometer-alt"></i>
                        NEET Study Dashboard
                    </div>
                    <div class="dashboard-switch">
                        <button class="switch-btn active" data-view="today">Today's Classes</button>
                        <button class="switch-btn" data-view="upcoming">Upcoming</button>
                        <button class="switch-btn" data-view="courses">My Courses</button>
                        <button class="previous-classes-btn" id="view-previous-btn">
                            <i class="fas fa-history"></i> Previous Classes
                        </button>
                    </div>
                </div>
                
                <!-- Today's Classes View -->
                <div class="dashboard-section" id="today-view">
                    <div class="dashboard-header">
                        <div class="dashboard-title">
                            <i class="fas fa-video"></i>
                            Today's Classes
                        </div>
                        <button class="view-all-btn" id="view-today-all">
                            <i class="fas fa-external-link-alt"></i> View in Schedule
                        </button>
                    </div>
                    <div class="classes-grid" id="today-classes-grid">
                        <!-- Today's classes will appear here -->
                    </div>
                </div>
                
                <!-- Upcoming Classes View -->
                <div class="dashboard-section" id="upcoming-view" style="display: none;">
                    <div class="dashboard-header">
                        <div class="dashboard-title">
                            <i class="fas fa-calendar"></i>
                            Upcoming Classes (Next 7 Days)
                        </div>
                        <button class="view-all-btn" id="view-upcoming-all">
                            <i class="fas fa-external-link-alt"></i> View All
                        </button>
                    </div>
                    <div class="classes-grid" id="upcoming-classes-grid">
                        <!-- Upcoming classes will appear here -->
                    </div>
                </div>
                
                <!-- Courses View -->
                <div class="dashboard-section" id="courses-view" style="display: none;">
                    <div class="dashboard-header">
                        <div class="dashboard-title">
                            <i class="fas fa-graduation-cap"></i>
                            My Courses
                        </div>
                        <button class="view-all-btn" id="create-course-btn">
                            <i class="fas fa-plus"></i> Create New Course
                        </button>
                    </div>
                    <div class="classes-grid" id="courses-grid">
                        <!-- Courses will appear here -->
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="dashboard-section">
                    <div class="dashboard-title">
                        <i class="fas fa-bolt"></i>
                        Quick Actions
                    </div>
                    <div class="homepage-buttons">
                        <button class="homepage-btn" id="quick-schedule-btn">
                            <i class="fas fa-calendar-plus"></i>
                            Schedule New Class
                        </button>
                        <button class="homepage-btn" id="quick-course-btn">
                            <i class="fas fa-book-medical"></i>
                            Add Lecture to Course
                        </button>
                        <button class="homepage-btn" id="quick-notes-btn">
                            <i class="fas fa-sticky-note"></i>
                            Take Quick Notes
                        </button>
                        <button class="homepage-btn" id="quick-review-btn">
                            <i class="fas fa-redo"></i>
                            Review Previous Class
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Triple View -->
            <div class="triple-view" id="triple-view">
                <!-- Split View for Video and Notes (left side) -->
                <div class="video-notes-split">
                    <!-- Video Viewer (top, custom height) -->
                    <div class="video-viewer">
                        <div class="video-controls" id="video-controls">
                            <!-- Video controls will appear here -->
                        </div>
                        <div class="video-container" id="video-container">
                            <div class="empty-state">
                                <i class="fas fa-video"></i>
                                <h3>No Video Loaded</h3>
                                <p>Open a video or paste a YouTube link</p>
                            </div>
                        </div>
                        <div class="video-resize-handle" id="video-resize-handle"></div>
                    </div>
                    
                    <!-- Notes Panel (bottom) -->
                    <div class="notes-panel">
                        <div class="notes-header">
                            <div class="notes-title">Notes</div>
                        </div>
                        
                        <div class="formatting-toolbar">
                            <button class="format-btn" data-command="bold" title="Bold">
                                <i class="fas fa-bold"></i>
                            </button>
                            <button class="format-btn" data-command="italic" title="Italic">
                                <i class="fas fa-italic"></i>
                            </button>
                            <button class="format-btn" data-command="underline" title="Underline">
                                <i class="fas fa-underline"></i>
                            </button>
                            <button class="format-btn" data-command="insertUnorderedList" title="Bullet List">
                                <i class="fas fa-list-ul"></i>
                            </button>
                            <button class="format-btn" data-command="insertOrderedList" title="Numbered List">
                                <i class="fas fa-list-ol"></i>
                            </button>
                        </div>
                        
                        <div class="notes-editor" id="notes-editor" contenteditable="true"></div>
                        
                        <div class="notes-footer">
                            <button class="save-btn" id="save-btn" disabled>
                                <i class="fas fa-save"></i> Save Notes
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- PDF Viewer (right side, custom width) -->
                <div class="pdf-viewer-section">
                    <div class="pdf-controls" id="pdf-controls">
                        <!-- PDF controls will appear here -->
                    </div>
                    <div class="pdf-container" id="pdf-container">
                        <div class="empty-state">
                            <i class="fas fa-file-pdf"></i>
                            <h3>No PDF Loaded</h3>
                            <p>Open a PDF to begin</p>
                        </div>
                    </div>
                    <button class="fullscreen-btn" id="pdf-fullscreen-btn">
                        <i class="fas fa-expand"></i>
                    </button>
                    <div class="pdf-resize-handle" id="pdf-resize-handle"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Fullscreen Containers -->
    <div class="fullscreen-container" id="pdf-fullscreen">
        <div class="fullscreen-header">
            <div class="fullscreen-title">PDF Fullscreen</div>
            <button class="exit-fullscreen-btn" id="exit-pdf-fullscreen">&times;</button>
        </div>
        <div class="fullscreen-content" id="pdf-fullscreen-content"></div>
    </div>
    
    <!-- NEET Schedule Feature -->
    <div class="schedule-container" id="schedule-container">
        <div class="schedule-header">
            <div class="schedule-title">
                <i class="fas fa-calendar-alt"></i>
                NEET Study Schedule
            </div>
            <button class="close-schedule" id="close-schedule">&times;</button>
        </div>
        <div class="schedule-content">
            <div class="schedule-sidebar">
                <h3><i class="fas fa-plus-circle"></i> Schedule New Class</h3>
                <div class="class-form">
                    <div class="form-group">
                        <label>Subject</label>
                        <div class="subject-selector">
                            <button class="subject-btn biology" data-subject="biology">Biology</button>
                            <button class="subject-btn chemistry" data-subject="chemistry">Chemistry</button>
                            <button class="subject-btn physics" data-subject="physics">Physics</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Class Title</label>
                        <input type="text" id="class-title" placeholder="e.g., Cell Structure and Function">
                    </div>
                    
                    <div class="form-group">
                        <label>Class Date</label>
                        <input type="date" id="class-date">
                    </div>
                    
                    <div class="form-group">
                        <label>YouTube Video URL</label>
                        <input type="text" id="youtube-url-schedule" placeholder="https://www.youtube.com/watch?v=...">
                        <small style="color: var(--secondary-color); margin-top: 5px;">Paste YouTube link for this class session</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Description (Optional)</label>
                        <textarea id="class-description" rows="3" placeholder="Add description or key topics..."></textarea>
                    </div>
                    
                    <div class="class-actions">
                        <button class="class-action-btn save-class-btn" id="save-class-btn">
                            <i class="fas fa-save"></i> Save Class
                        </button>
                        <button class="class-action-btn clear-class-btn" id="clear-class-btn">
                            <i class="fas fa-times"></i> Clear
                        </button>
                    </div>
                </div>
                
                <div class="today-classes">
                    <div class="today-header">
                        <div class="today-title">Today's Classes</div>
                    </div>
                    <div id="today-classes-list">
                        <!-- Today's classes will appear here -->
                    </div>
                </div>
            </div>
            
            <div class="schedule-main">
                <div class="schedule-calendar">
                    <div class="calendar-header">
                        <div class="calendar-month" id="calendar-month">March 2024</div>
                        <div class="calendar-nav">
                            <button class="calendar-nav-btn" id="prev-month">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="calendar-nav-btn" id="next-month">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendar-grid">
                        <!-- Calendar will be generated here -->
                    </div>
                </div>
                
                <div class="schedule-classes">
                    <h3><i class="fas fa-book"></i> Scheduled Classes</h3>
                    <div id="scheduled-classes-list">
                        <!-- Scheduled classes will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Upcoming Classes Feature -->
    <div class="upcoming-container" id="upcoming-container">
        <div class="upcoming-header">
            <div class="upcoming-title">
                <i class="fas fa-calendar"></i>
                Upcoming Classes
            </div>
            <button class="close-upcoming" id="close-upcoming">&times;</button>
        </div>
        <div class="upcoming-content">
            <div class="upcoming-filters">
                <button class="filter-btn active" data-filter="all">All Subjects</button>
                <button class="filter-btn" data-filter="biology">Biology</button>
                <button class="filter-btn" data-filter="chemistry">Chemistry</button>
                <button class="filter-btn" data-filter="physics">Physics</button>
                <button class="filter-btn" data-filter="week">Next 7 Days</button>
                <button class="filter-btn" data-filter="month">This Month</button>
            </div>
            
            <div class="upcoming-classes-list" id="upcoming-classes-list">
                <!-- Upcoming classes will appear here -->
            </div>
        </div>
    </div>
    
    <!-- Course Creator Feature -->
    <div class="course-container" id="course-container">
        <div class="course-header">
            <div class="course-title">
                <i class="fas fa-graduation-cap"></i>
                Course Creator
            </div>
            <button class="close-course" id="close-course">&times;</button>
        </div>
        <div class="course-content">
            <div class="course-sidebar">
                <h3><i class="fas fa-plus-circle"></i> Create New Course</h3>
                <div class="course-form">
                    <div class="form-group">
                        <label>Course Name</label>
                        <input type="text" id="course-name" placeholder="e.g., NEET Biology Complete Course">
                    </div>
                    
                    <div class="form-group">
                        <label>Subject</label>
                        <div class="subject-selector">
                            <button class="subject-btn biology" data-subject="biology">Biology</button>
                            <button class="subject-btn chemistry" data-subject="chemistry">Chemistry</button>
                            <button class="subject-btn physics" data-subject="physics">Physics</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="course-description" rows="3" placeholder="Describe the course content..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Total Lectures</label>
                        <input type="number" id="course-lectures" min="1" max="100" value="10">
                    </div>
                    
                    <div class="class-actions">
                        <button class="class-action-btn save-class-btn" id="create-course-btn">
                            <i class="fas fa-save"></i> Create Course
                        </button>
                    </div>
                </div>
                
                <div class="lecture-form" style="margin-top: 30px;">
                    <h3><i class="fas fa-plus"></i> Add Lecture to Course</h3>
                    <div class="form-group">
                        <label>Select Course</label>
                        <select id="select-course">
                            <!-- Courses will be populated here -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Lecture Title</label>
                        <input type="text" id="lecture-title" placeholder="e.g., Cell Structure - Part 1">
                    </div>
                    
                    <div class="form-group">
                        <label>YouTube Video URL</label>
                        <input type="text" id="lecture-youtube-url" placeholder="https://www.youtube.com/watch?v=...">
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="lecture-description" rows="2" placeholder="Lecture description..."></textarea>
                    </div>
                    
                    <div class="class-actions">
                        <button class="class-action-btn save-class-btn" id="add-lecture-btn">
                            <i class="fas fa-plus"></i> Add Lecture
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="course-main">
                <div class="course-list" id="course-list">
                    <h3><i class="fas fa-list"></i> My Courses</h3>
                    <div id="courses-list-container">
                        <!-- Courses list will appear here -->
                    </div>
                </div>
                
                <div class="course-viewer" id="course-viewer">
                    <div class="dashboard-header">
                        <div class="dashboard-title" id="viewer-course-title">
                            <i class="fas fa-play-circle"></i>
                            Course Viewer
                        </div>
                        <button class="view-all-btn" id="start-course-btn">
                            <i class="fas fa-play"></i> Start Course
                        </button>
                    </div>
                    
                    <div id="course-lectures-list">
                        <!-- Course lectures will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recycle Bin Feature -->
    <div class="recycle-bin-container" id="recycle-bin-container">
        <div class="recycle-bin-header">
            <div class="recycle-bin-title">
                <i class="fas fa-trash-restore"></i>
                Recycle Bin
            </div>
            <button class="close-recycle-bin" id="close-recycle-bin">&times;</button>
        </div>
        <div class="recycle-bin-content">
            <div id="recycle-bin-list">
                <!-- Deleted courses will appear here -->
            </div>
        </div>
    </div>
    
    <!-- Edit Course Modal -->
    <div class="edit-course-modal" id="edit-course-modal">
        <div class="edit-course-modal-content">
            <div class="edit-modal-header">
                <div class="edit-modal-title">Edit Course</div>
                <button class="close-edit-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="edit-course-name">Course Name</label>
                <input type="text" id="edit-course-name" placeholder="e.g., NEET Biology Complete Course">
            </div>
            <div class="input-group">
                <label for="edit-course-subject">Subject</label>
                <select id="edit-course-subject">
                    <option value="biology">Biology</option>
                    <option value="chemistry">Chemistry</option>
                    <option value="physics">Physics</option>
                </select>
            </div>
            <div class="input-group">
                <label for="edit-course-description">Description</label>
                <textarea id="edit-course-description" rows="3" placeholder="Describe the course content..."></textarea>
            </div>
            <div class="input-group">
                <label for="edit-course-total-lectures">Total Lectures</label>
                <input type="number" id="edit-course-total-lectures" min="1" max="100">
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="cancel-edit-course-btn">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="save-edit-course-btn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Class Modal -->
    <div class="edit-class-modal" id="edit-class-modal">
        <div class="edit-class-modal-content">
            <div class="edit-modal-header">
                <div class="edit-modal-title">Edit Scheduled Class</div>
                <button class="close-edit-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="edit-class-title">Class Title</label>
                <input type="text" id="edit-class-title" placeholder="e.g., Cell Structure and Function">
            </div>
            <div class="input-group">
                <label for="edit-class-subject">Subject</label>
                <select id="edit-class-subject">
                    <option value="biology">Biology</option>
                    <option value="chemistry">Chemistry</option>
                    <option value="physics">Physics</option>
                </select>
            </div>
            <div class="input-group">
                <label for="edit-class-date">Class Date</label>
                <input type="date" id="edit-class-date">
            </div>
            <div class="input-group">
                <label for="edit-class-youtube-url">YouTube Video URL</label>
                <input type="text" id="edit-class-youtube-url" placeholder="https://www.youtube.com/watch?v=...">
            </div>
            <div class="input-group">
                <label for="edit-class-description">Description (Optional)</label>
                <textarea id="edit-class-description" rows="3" placeholder="Add description or key topics..."></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="cancel-edit-class-btn">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="save-edit-class-btn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Lecture Modal -->
    <div class="edit-lecture-modal" id="edit-lecture-modal">
        <div class="edit-lecture-modal-content">
            <div class="edit-modal-header">
                <div class="edit-modal-title">Edit Lecture</div>
                <button class="close-edit-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="edit-lecture-title">Lecture Title</label>
                <input type="text" id="edit-lecture-title" placeholder="e.g., Cell Structure - Part 1">
            </div>
            <div class="input-group">
                <label for="edit-lecture-youtube-url">YouTube Video URL</label>
                <input type="text" id="edit-lecture-youtube-url" placeholder="https://www.youtube.com/watch?v=...">
            </div>
            <div class="input-group">
                <label for="edit-lecture-description">Description</label>
                <textarea id="edit-lecture-description" rows="2" placeholder="Lecture description..."></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="cancel-edit-lecture-btn">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="save-edit-lecture-btn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="youtube-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add YouTube Video</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="youtube-url">YouTube Video URL</label>
                <input type="text" id="youtube-url" placeholder="https://www.youtube.com/watch?v=...">
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="cancel-youtube-btn">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="load-youtube-btn">Load Video</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="save-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Save Notes</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="input-group">
                <label for="note-title">Note Title</label>
                <input type="text" id="note-title" placeholder="My Study Notes">
            </div>
            <div class="input-group">
                <label for="note-subject">Subject/Topic</label>
                <input type="text" id="note-subject" placeholder="e.g., Biology, Chapter 3">
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="cancel-save-btn">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="confirm-save-btn">Save</button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements - Existing
            const sidebar = document.querySelector('.sidebar');
            const menuBtn = document.getElementById('menu-btn');
            const closeSidebarBtn = document.querySelector('.close-sidebar');
            const sidebarTabs = document.querySelectorAll('.sidebar-tab');
            const sidebarContents = document.querySelectorAll('.sidebar-content');
            const themeSelector = document.getElementById('theme-selector');
            const fontSelector = document.getElementById('font-selector');
            const fullscreenToggle = document.getElementById('fullscreen-toggle');
            const flipBtn = document.getElementById('flip-btn');
            const openPdfBtn = document.getElementById('open-pdf-btn');
            const openVideoBtn = document.getElementById('open-video-btn');
            const openYoutubeBtn = document.getElementById('open-youtube-btn');
            const homeBtn = document.getElementById('home-btn');
            const pdfContainer = document.getElementById('pdf-container');
            const pdfControls = document.getElementById('pdf-controls');
            const videoContainer = document.getElementById('video-container');
            const videoControls = document.getElementById('video-controls');
            const notesEditor = document.getElementById('notes-editor');
            const saveBtn = document.getElementById('save-btn');
            const savedNotesList = document.getElementById('saved-notes-list');
            const youtubeModal = document.getElementById('youtube-modal');
            const youtubeUrlInput = document.getElementById('youtube-url');
            const loadYoutubeBtn = document.getElementById('load-youtube-btn');
            const cancelYoutubeBtn = document.getElementById('cancel-youtube-btn');
            const saveModal = document.getElementById('save-modal');
            const noteTitleInput = document.getElementById('note-title');
            const noteSubjectInput = document.getElementById('note-subject');
            const confirmSaveBtn = document.getElementById('confirm-save-btn');
            const cancelSaveBtn = document.getElementById('cancel-save-btn');
            
            // Fullscreen elements - Existing
            const pdfFullscreenBtn = document.getElementById('pdf-fullscreen-btn');
            const pdfFullscreen = document.getElementById('pdf-fullscreen');
            const pdfFullscreenContent = document.getElementById('pdf-fullscreen-content');
            const exitPdfFullscreen = document.getElementById('exit-pdf-fullscreen');
            
            // Resize handles - Existing
            const pdfResizeHandle = document.getElementById('pdf-resize-handle');
            const videoResizeHandle = document.getElementById('video-resize-handle');
            
            // NEET Schedule Elements
            const scheduleToggle = document.getElementById('schedule-toggle');
            const scheduleContainer = document.getElementById('schedule-container');
            const closeScheduleBtn = document.getElementById('close-schedule');
            const subjectButtons = document.querySelectorAll('.subject-btn');
            const classTitleInput = document.getElementById('class-title');
            const classDateInput = document.getElementById('class-date');
            const youtubeUrlScheduleInput = document.getElementById('youtube-url-schedule');
            const classDescriptionInput = document.getElementById('class-description');
            const saveClassBtn = document.getElementById('save-class-btn');
            const clearClassBtn = document.getElementById('clear-class-btn');
            const calendarMonth = document.getElementById('calendar-month');
            const calendarGrid = document.getElementById('calendar-grid');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const scheduledClassesList = document.getElementById('scheduled-classes-list');
            const todayClassesList = document.getElementById('today-classes-list');
            
            // NEW Elements - Homepage Dashboard
            const homepageDashboard = document.getElementById('homepage-dashboard');
            const tripleView = document.getElementById('triple-view');
            const dashboardBtn = document.getElementById('dashboard-btn');
            const previousClassesBtn = document.getElementById('previous-classes-btn');
            const upcomingBtn = document.getElementById('upcoming-btn');
            const courseBtn = document.getElementById('course-btn');
            const recycleBinBtn = document.getElementById('recycle-bin-btn');
            const todayClassesGrid = document.getElementById('today-classes-grid');
            const upcomingClassesGrid = document.getElementById('upcoming-classes-grid');
            const coursesGrid = document.getElementById('courses-grid');
            const switchButtons = document.querySelectorAll('.switch-btn');
            const viewTodayAllBtn = document.getElementById('view-today-all');
            const viewPreviousBtn = document.getElementById('view-previous-btn');
            const viewUpcomingAllBtn = document.getElementById('view-upcoming-all');
            const createCourseBtn = document.getElementById('create-course-btn');
            
            // Quick Action Buttons
            const quickScheduleBtn = document.getElementById('quick-schedule-btn');
            const quickCourseBtn = document.getElementById('quick-course-btn');
            const quickNotesBtn = document.getElementById('quick-notes-btn');
            const quickReviewBtn = document.getElementById('quick-review-btn');
            
            // NEW Elements - Upcoming Classes
            const upcomingContainer = document.getElementById('upcoming-container');
            const closeUpcomingBtn = document.getElementById('close-upcoming');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const upcomingClassesList = document.getElementById('upcoming-classes-list');
            
            // NEW Elements - Course Creator
            const courseContainer = document.getElementById('course-container');
            const closeCourseBtn = document.getElementById('close-course');
            const courseNameInput = document.getElementById('course-name');
            const courseDescriptionInput = document.getElementById('course-description');
            const courseLecturesInput = document.getElementById('course-lectures');
            const createCourseMainBtn = document.querySelector('#course-container .save-class-btn');
            const selectCourseDropdown = document.getElementById('select-course');
            const lectureTitleInput = document.getElementById('lecture-title');
            const lectureYoutubeUrlInput = document.getElementById('lecture-youtube-url');
            const lectureDescriptionInput = document.getElementById('lecture-description');
            const addLectureBtn = document.getElementById('add-lecture-btn');
            const coursesListContainer = document.getElementById('courses-list-container');
            const courseViewer = document.getElementById('course-viewer');
            const viewerCourseTitle = document.getElementById('viewer-course-title');
            const courseLecturesList = document.getElementById('course-lectures-list');
            const startCourseBtn = document.getElementById('start-course-btn');
            
            // NEW Elements - Recycle Bin
            const recycleBinContainer = document.getElementById('recycle-bin-container');
            const closeRecycleBinBtn = document.getElementById('close-recycle-bin');
            const recycleBinList = document.getElementById('recycle-bin-list');
            
            // NEW Elements - Edit Modals
            const editCourseModal = document.getElementById('edit-course-modal');
            const editCourseNameInput = document.getElementById('edit-course-name');
            const editCourseSubjectInput = document.getElementById('edit-course-subject');
            const editCourseDescriptionInput = document.getElementById('edit-course-description');
            const editCourseTotalLecturesInput = document.getElementById('edit-course-total-lectures');
            const saveEditCourseBtn = document.getElementById('save-edit-course-btn');
            const cancelEditCourseBtn = document.getElementById('cancel-edit-course-btn');
            
            const editClassModal = document.getElementById('edit-class-modal');
            const editClassTitleInput = document.getElementById('edit-class-title');
            const editClassSubjectInput = document.getElementById('edit-class-subject');
            const editClassDateInput = document.getElementById('edit-class-date');
            const editClassYoutubeUrlInput = document.getElementById('edit-class-youtube-url');
            const editClassDescriptionInput = document.getElementById('edit-class-description');
            const saveEditClassBtn = document.getElementById('save-edit-class-btn');
            const cancelEditClassBtn = document.getElementById('cancel-edit-class-btn');
            
            const editLectureModal = document.getElementById('edit-lecture-modal');
            const editLectureTitleInput = document.getElementById('edit-lecture-title');
            const editLectureYoutubeUrlInput = document.getElementById('edit-lecture-youtube-url');
            const editLectureDescriptionInput = document.getElementById('edit-lecture-description');
            const saveEditLectureBtn = document.getElementById('save-edit-lecture-btn');
            const cancelEditLectureBtn = document.getElementById('cancel-edit-lecture-btn');
            
            // App State
            let currentPdf = null;
            let currentVideo = null;
            let currentMediaType = null;
            let currentNoteId = null;
            let isFullscreenMode = false;
            let isLayoutFlipped = false;
            let savedNotes = JSON.parse(localStorage.getItem('studymate-notes')) || [];
            let layoutSettings = JSON.parse(localStorage.getItem('studymate-layout')) || {
                pdfWidth: '40%',
                videoHeight: '60%'
            };
            
            // NEET Schedule State
            let selectedSubject = 'biology';
            let selectedDate = new Date().toISOString().split('T')[0];
            let currentCalendarDate = new Date();
            let scheduledClasses = JSON.parse(localStorage.getItem('neet-schedule')) || [];
            
            // NEW State - Courses
            let courses = JSON.parse(localStorage.getItem('neet-courses')) || [];
            let deletedCourses = JSON.parse(localStorage.getItem('neet-deleted-courses')) || [];
            let selectedCourseId = null;
            let currentFilter = 'all';
            let editingCourseId = null;
            let editingClassIndex = null;
            let editingLectureId = null;
            let editingLectureCourseId = null;
            let activeMenu = null; // Track which menu is currently open
            
            // Initialize the app
            init();
            
            function init() {
                // Apply layout settings
                applyLayoutSettings();
                
                // Load saved data
                updateSavedNotesList();
                
                // Set up event listeners
                setupEventListeners();
                
                // Load selected theme
                const savedTheme = localStorage.getItem('studymate-theme') || 'light';
                themeSelector.value = savedTheme;
                applyTheme(savedTheme);
                
                // Load selected font
                const savedFont = localStorage.getItem('studymate-font') || 'patrick-hand';
                fontSelector.value = savedFont;
                applyFont(savedFont);
                
                // Load flip setting
                isLayoutFlipped = localStorage.getItem('studymate-flipped') === 'true';
                if (isLayoutFlipped) {
                    flipLayout();
                }
                
                // Initially hide fullscreen button
                pdfFullscreenBtn.style.display = 'none';
                
                // Initialize NEET Schedule
                initSchedule();
                
                // Initialize Courses
                initCourses();
                
                // Show homepage dashboard by default
                showDashboard();
                
                // Close any open menus when clicking outside
                document.addEventListener('click', function(event) {
                    if (activeMenu && !event.target.closest('.class-menu-toggle, .course-menu-toggle, .lecture-menu-toggle')) {
                        closeActiveMenu();
                    }
                });
            }
            
            function applyLayoutSettings() {
                document.documentElement.style.setProperty('--pdf-width', layoutSettings.pdfWidth);
                document.documentElement.style.setProperty('--video-height', layoutSettings.videoHeight);
            }
            
            function setupEventListeners() {
                // Sidebar toggle
                menuBtn.addEventListener('click', toggleSidebar);
                closeSidebarBtn.addEventListener('click', toggleSidebar);
                
                // Sidebar tabs
                sidebarTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const tabId = this.getAttribute('data-tab');
                        sidebarTabs.forEach(t => t.classList.remove('active'));
                        sidebarContents.forEach(c => c.classList.remove('active'));
                        this.classList.add('active');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });
                
                // Home button
                homeBtn.addEventListener('click', () => {
                    location.reload();
                });
                
                // Dashboard button - NEW
                dashboardBtn.addEventListener('click', showDashboard);
                
                // Previous classes button - NEW
                previousClassesBtn.addEventListener('click', showPreviousClasses);
                
                // Upcoming button - NEW
                upcomingBtn.addEventListener('click', () => {
                    toggleSidebar();
                    showUpcoming();
                });
                
                // Course button - NEW
                courseBtn.addEventListener('click', () => {
                    toggleSidebar();
                    showCourseCreator();
                });
                
                // Recycle bin button - NEW
                recycleBinBtn.addEventListener('click', () => {
                    toggleSidebar();
                    showRecycleBin();
                });
                
                // Theme selection
                themeSelector.addEventListener('change', function() {
                    const selectedTheme = this.value;
                    applyTheme(selectedTheme);
                    localStorage.setItem('studymate-theme', selectedTheme);
                });
                
                // Font selection
                fontSelector.addEventListener('change', function() {
                    const selectedFont = this.value;
                    applyFont(selectedFont);
                    localStorage.setItem('studymate-font', selectedFont);
                });
                
                // Flip layout toggle
                flipBtn.addEventListener('click', function() {
                    isLayoutFlipped = !isLayoutFlipped;
                    localStorage.setItem('studymate-flipped', isLayoutFlipped);
                    flipLayout();
                });
                
                // Fullscreen toggle
                fullscreenToggle.addEventListener('click', toggleFullscreenMode);
                
                // PDF button
                openPdfBtn.addEventListener('click', () => {
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = '.pdf';
                    input.onchange = e => {
                        const file = e.target.files[0];
                        if (file) {
                            loadPdf(file);
                        }
                    };
                    input.click();
                });
                
                // Video button
                openVideoBtn.addEventListener('click', () => {
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = 'video/*';
                    input.onchange = e => {
                        const file = e.target.files[0];
                        if (file) {
                            loadVideo(file);
                        }
                    };
                    input.click();
                });
                
                // YouTube button
                openYoutubeBtn.addEventListener('click', () => {
                    youtubeModal.style.display = 'flex';
                    youtubeUrlInput.focus();
                });
                
                // YouTube modal
                loadYoutubeBtn.addEventListener('click', loadYouTubeVideo);
                cancelYoutubeBtn.addEventListener('click', () => {
                    youtubeModal.style.display = 'none';
                });
                
                // Notes editor
                notesEditor.addEventListener('input', () => {
                    saveBtn.disabled = false;
                });
                
                // Formatting buttons
                document.querySelectorAll('.format-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const command = this.getAttribute('data-command');
                        document.execCommand(command, false, null);
                        notesEditor.focus();
                    });
                });
                
                // Save notes
                saveBtn.addEventListener('click', () => {
                    saveModal.style.display = 'flex';
                    noteTitleInput.focus();
                    
                    // Set default title if media is loaded
                    if (currentMediaType) {
                        let defaultTitle = 'My Notes';
                        if (currentPdf) {
                            defaultTitle = currentPdf.name.replace('.pdf', '') + ' Notes';
                        } else if (currentVideo) {
                            defaultTitle = currentVideo.name.replace(/\.[^/.]+$/, '') + ' Notes';
                        }
                        noteTitleInput.value = defaultTitle;
                    }
                });
                
                // Save modal
                confirmSaveBtn.addEventListener('click', saveNotes);
                cancelSaveBtn.addEventListener('click', () => {
                    saveModal.style.display = 'none';
                });
                
                // PDF fullscreen button
                pdfFullscreenBtn.addEventListener('click', enterPdfFullscreen);
                
                // Exit PDF fullscreen button
                exitPdfFullscreen.addEventListener('click', () => exitFullscreen('pdf'));
                
                // Panel resizing
                setupPanelResizing();
                
                // Close modals when clicking outside
                window.addEventListener('click', (e) => {
                    if (e.target === youtubeModal) youtubeModal.style.display = 'none';
                    if (e.target === saveModal) saveModal.style.display = 'none';
                    if (e.target === pdfFullscreen) exitFullscreen('pdf');
                    if (e.target === editCourseModal) editCourseModal.style.display = 'none';
                    if (e.target === editClassModal) editClassModal.style.display = 'none';
                    if (e.target === editLectureModal) editLectureModal.style.display = 'none';
                    if (e.target === recycleBinContainer) recycleBinContainer.style.display = 'none';
                });
                
                // NEET Schedule Event Listeners
                scheduleToggle.addEventListener('click', toggleSchedule);
                closeScheduleBtn.addEventListener('click', toggleSchedule);
                
                // Subject selection
                subjectButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        subjectButtons.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        selectedSubject = this.getAttribute('data-subject');
                    });
                });
                
                // Set default date
                classDateInput.value = selectedDate;
                classDateInput.addEventListener('change', function() {
                    selectedDate = this.value;
                    updateCalendar();
                });
                
                // Save class button
                saveClassBtn.addEventListener('click', saveClass);
                
                // Clear form button
                clearClassBtn.addEventListener('click', clearClassForm);
                
                // Calendar navigation
                prevMonthBtn.addEventListener('click', () => {
                    currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                    updateCalendar();
                });
                
                nextMonthBtn.addEventListener('click', () => {
                    currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                    updateCalendar();
                });
                
                // NEW Event Listeners - Dashboard
                switchButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const view = this.getAttribute('data-view');
                        switchButtons.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        // Hide all views
                        document.getElementById('today-view').style.display = 'none';
                        document.getElementById('upcoming-view').style.display = 'none';
                        document.getElementById('courses-view').style.display = 'none';
                        
                        // Show selected view
                        document.getElementById(`${view}-view`).style.display = 'block';
                        
                        // Update content
                        if (view === 'today') updateTodayDashboard();
                        if (view === 'upcoming') updateUpcomingDashboard();
                        if (view === 'courses') updateCoursesDashboard();
                    });
                });
                
                viewTodayAllBtn.addEventListener('click', () => {
                    showDashboard();
                    toggleSchedule();
                });
                
                viewPreviousBtn.addEventListener('click', showPreviousClasses);
                
                viewUpcomingAllBtn.addEventListener('click', () => {
                    showUpcoming();
                });
                
                // Quick Action Buttons
                quickScheduleBtn.addEventListener('click', () => {
                    showDashboard();
                    toggleSchedule();
                });
                
                quickCourseBtn.addEventListener('click', () => {
                    showDashboard();
                    showCourseCreator();
                });
                
                quickNotesBtn.addEventListener('click', () => {
                    showTripleView();
                    notesEditor.focus();
                });
                
                quickReviewBtn.addEventListener('click', () => {
                    // Show last played class
                    if (scheduledClasses.length > 0) {
                        const today = new Date().toISOString().split('T')[0];
                        const previousClasses = scheduledClasses.filter(cls => cls.date < today);
                        if (previousClasses.length > 0) {
                            const lastClass = previousClasses[previousClasses.length - 1];
                            playClassVideo(lastClass.youtubeUrl);
                            showTripleView();
                        } else {
                            alert('No previous classes found. Schedule a class first.');
                        }
                    } else {
                        alert('No classes found. Schedule a class first.');
                    }
                });
                
                // NEW Event Listeners - Upcoming Classes
                closeUpcomingBtn.addEventListener('click', () => {
                    upcomingContainer.style.display = 'none';
                });
                
                filterButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        filterButtons.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        currentFilter = this.getAttribute('data-filter');
                        updateUpcomingClasses();
                    });
                });
                
                // NEW Event Listeners - Course Creator
                closeCourseBtn.addEventListener('click', () => {
                    courseContainer.style.display = 'none';
                });
                
                createCourseMainBtn.addEventListener('click', createCourse);
                
                addLectureBtn.addEventListener('click', addLectureToCourse);
                
                startCourseBtn.addEventListener('click', startCourse);
                
                // NEW Event Listeners - Recycle Bin
                closeRecycleBinBtn.addEventListener('click', () => {
                    recycleBinContainer.style.display = 'none';
                });
                
                // NEW Event Listeners - Edit Modals
                cancelEditCourseBtn.addEventListener('click', () => {
                    editCourseModal.style.display = 'none';
                });
                
                saveEditCourseBtn.addEventListener('click', saveEditedCourse);
                
                cancelEditClassBtn.addEventListener('click', () => {
                    editClassModal.style.display = 'none';
                });
                
                saveEditClassBtn.addEventListener('click', saveEditedClass);
                
                cancelEditLectureBtn.addEventListener('click', () => {
                    editLectureModal.style.display = 'none';
                });
                
                saveEditLectureBtn.addEventListener('click', saveEditedLecture);
                
                // Close edit modal buttons
                document.querySelectorAll('.close-edit-modal').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const modal = this.closest('.edit-course-modal, .edit-class-modal, .edit-lecture-modal');
                        if (modal) {
                            modal.style.display = 'none';
                        }
                    });
                });
                
                // Add existing event listeners for course buttons in dashboard
                const createCourseDashboardBtn = document.querySelector('#courses-view .view-all-btn');
                if (createCourseDashboardBtn) {
                    createCourseDashboardBtn.addEventListener('click', () => {
                        showDashboard();
                        showCourseCreator();
                    });
                }
            }
            
            function showDashboard() {
                homepageDashboard.style.display = 'flex';
                tripleView.style.display = 'none';
                scheduleContainer.style.display = 'none';
                upcomingContainer.style.display = 'none';
                courseContainer.style.display = 'none';
                recycleBinContainer.style.display = 'none';
                updateTodayDashboard();
                updateUpcomingDashboard();
                updateCoursesDashboard();
            }
            
            function showTripleView() {
                homepageDashboard.style.display = 'none';
                tripleView.style.display = 'flex';
                scheduleContainer.style.display = 'none';
                upcomingContainer.style.display = 'none';
                courseContainer.style.display = 'none';
                recycleBinContainer.style.display = 'none';
            }
            
            function showPreviousClasses() {
                toggleSidebar();
                showDashboard();
                // Switch to schedule view
                toggleSchedule();
                // Show all classes including previous ones
                updateScheduledClasses(true);
            }
            
            function showUpcoming() {
                upcomingContainer.style.display = 'flex';
                updateUpcomingClasses();
            }
            
            function showCourseCreator() {
                courseContainer.style.display = 'flex';
                updateCourseDropdown();
                updateCoursesList();
            }
            
            function showRecycleBin() {
                recycleBinContainer.style.display = 'flex';
                updateRecycleBin();
            }
            
            function closeActiveMenu() {
                if (activeMenu) {
                    activeMenu.classList.remove('show');
                    activeMenu = null;
                }
            }
            
            function toggleMenu(menuToggle) {
                const menuDropdown = menuToggle.nextElementSibling;
                
                if (activeMenu === menuDropdown) {
                    // Clicking the same menu toggle, close it
                    menuDropdown.classList.remove('show');
                    activeMenu = null;
                } else {
                    // Close any other open menu
                    if (activeMenu) {
                        activeMenu.classList.remove('show');
                    }
                    // Open the clicked menu
                    menuDropdown.classList.add('show');
                    activeMenu = menuDropdown;
                }
            }
            
            function updateTodayDashboard() {
                const today = new Date().toISOString().split('T')[0];
                const todayClasses = scheduledClasses.filter(cls => cls.date === today);
                
                if (todayClasses.length === 0) {
                    todayClassesGrid.innerHTML = `
                        <div class="no-classes" style="grid-column: 1/-1;">
                            <i class="fas fa-calendar-plus"></i>
                            <h4>No classes scheduled for today</h4>
                            <p>Schedule a class to get started</p>
                            <button class="view-all-btn" style="margin-top: 15px;" id="schedule-now-btn">
                                <i class="fas fa-calendar-plus"></i> Schedule Now
                            </button>
                        </div>
                    `;
                    
                    // Add event listener to the schedule button
                    setTimeout(() => {
                        const scheduleNowBtn = document.getElementById('schedule-now-btn');
                        if (scheduleNowBtn) {
                            scheduleNowBtn.addEventListener('click', () => {
                                showDashboard();
                                toggleSchedule();
                            });
                        }
                    }, 100);
                    return;
                }
                
                let classesHTML = '';
                
                todayClasses.forEach((cls, index) => {
                    const videoId = extractYouTubeId(cls.youtubeUrl);
                    const thumbnailUrl = videoId ? `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : '';
                    
                    classesHTML += `
                        <div class="class-card">
                            ${thumbnailUrl ? `
                                <img src="${thumbnailUrl}" alt="Video thumbnail" class="class-card-thumbnail" data-url="${cls.youtubeUrl}">
                            ` : ''}
                            <div class="class-card-content">
                                <span class="class-card-subject ${cls.subject}">
                                    ${cls.subject.charAt(0).toUpperCase() + cls.subject.slice(1)}
                                </span>
                                <div class="class-card-title">${cls.title}</div>
                                <div class="class-card-date">Today  ${formatTime(cls.date)}</div>
                                ${cls.description ? `<div class="class-card-description">${cls.description}</div>` : ''}
                                <div class="class-card-actions">
                                    <button class="class-card-btn play-btn" data-url="${cls.youtubeUrl}">
                                        <i class="fas fa-play"></i> Play
                                    </button>
                                    <button class="class-card-btn edit-btn" onclick="editClass(${index})">
                                        <i class="fas fa-edit"></i> Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                todayClassesGrid.innerHTML = classesHTML;
                
                // Add event listeners
                todayClassesGrid.querySelectorAll('.play-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        showTripleView();
                    });
                });
                
                todayClassesGrid.querySelectorAll('.class-card-thumbnail').forEach(img => {
                    img.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        showTripleView();
                    });
                });
            }
            
            function updateUpcomingDashboard() {
                const today = new Date();
                const nextWeek = new Date(today);
                nextWeek.setDate(today.getDate() + 7);
                
                const upcomingClasses = scheduledClasses.filter(cls => {
                    const classDate = new Date(cls.date);
                    return classDate > today && classDate <= nextWeek;
                }).sort((a, b) => new Date(a.date) - new Date(b.date)).slice(0, 4); // Show only 4 classes
                
                if (upcomingClasses.length === 0) {
                    upcomingClassesGrid.innerHTML = `
                        <div class="no-classes" style="grid-column: 1/-1;">
                            <i class="fas fa-calendar"></i>
                            <h4>No upcoming classes in next 7 days</h4>
                            <p>Schedule classes to plan your study</p>
                        </div>
                    `;
                    return;
                }
                
                let classesHTML = '';
                
                upcomingClasses.forEach((cls, index) => {
                    const videoId = extractYouTubeId(cls.youtubeUrl);
                    const thumbnailUrl = videoId ? `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : '';
                    const classDate = new Date(cls.date);
                    const daysUntil = Math.ceil((classDate - today) / (1000 * 60 * 60 * 24));
                    
                    classesHTML += `
                        <div class="class-card">
                            ${thumbnailUrl ? `
                                <img src="${thumbnailUrl}" alt="Video thumbnail" class="class-card-thumbnail" data-url="${cls.youtubeUrl}">
                            ` : ''}
                            <div class="class-card-content">
                                <span class="class-card-subject ${cls.subject}">
                                    ${cls.subject.charAt(0).toUpperCase() + cls.subject.slice(1)}
                                </span>
                                <div class="class-card-title">${cls.title}</div>
                                <div class="class-card-date">${formatDate(cls.date)}  In ${daysUntil} day${daysUntil !== 1 ? 's' : ''}</div>
                                ${cls.description ? `<div class="class-card-description">${cls.description}</div>` : ''}
                                <div class="class-card-actions">
                                    <button class="class-card-btn play-btn" data-url="${cls.youtubeUrl}">
                                        <i class="fas fa-play"></i> Play
                                    </button>
                                    <button class="class-card-btn edit-btn" onclick="editClass(${scheduledClasses.indexOf(cls)})">
                                        <i class="fas fa-edit"></i> Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                upcomingClassesGrid.innerHTML = classesHTML;
                
                // Add event listeners
                upcomingClassesGrid.querySelectorAll('.play-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        showTripleView();
                    });
                });
                
                upcomingClassesGrid.querySelectorAll('.class-card-thumbnail').forEach(img => {
                    img.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        showTripleView();
                    });
                });
            }
            
            function updateCoursesDashboard() {
                if (courses.length === 0) {
                    coursesGrid.innerHTML = `
                        <div class="no-classes" style="grid-column: 1/-1;">
                            <i class="fas fa-graduation-cap"></i>
                            <h4>No courses created yet</h4>
                            <p>Create your first course to organize your study material</p>
                            <button class="view-all-btn" style="margin-top: 15px;" id="create-first-course-btn">
                                <i class="fas fa-plus"></i> Create First Course
                            </button>
                        </div>
                    `;
                    
                    // Add event listener to the create button
                    setTimeout(() => {
                        const createFirstCourseBtn = document.getElementById('create-first-course-btn');
                        if (createFirstCourseBtn) {
                            createFirstCourseBtn.addEventListener('click', () => {
                                showDashboard();
                                showCourseCreator();
                            });
                        }
                    }, 100);
                    return;
                }
                
                let coursesHTML = '';
                
                courses.forEach((course, index) => {
                    const subjectColor = course.subject;
                    const lecturesCount = course.lectures ? course.lectures.length : 0;
                    
                    coursesHTML += `
                        <div class="class-card">
                            <div class="class-card-content">
                                <span class="class-card-subject ${course.subject}">
                                    ${course.subject.charAt(0).toUpperCase() + course.subject.slice(1)}
                                </span>
                                <div class="course-menu">
                                    <button class="course-menu-toggle">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="course-menu-dropdown">
                                        <button class="course-menu-item edit-course-btn" data-course-id="${course.id}">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                        <button class="course-menu-item delete delete-course-btn" data-course-id="${course.id}">
                                            <i class="fas fa-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                                <div class="class-card-title">${course.name}</div>
                                <div class="class-card-date">${lecturesCount} lectures  ${course.totalLectures} total</div>
                                ${course.description ? `<div class="class-card-description">${course.description}</div>` : ''}
                                <div class="class-card-actions">
                                    <button class="class-card-btn play-btn" data-course-id="${course.id}">
                                        <i class="fas fa-play"></i> Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                coursesGrid.innerHTML = coursesHTML;
                
                // Add event listeners for menu toggles
                coursesGrid.querySelectorAll('.course-menu-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleMenu(this);
                    });
                });
                
                // Add event listeners for edit course buttons
                coursesGrid.querySelectorAll('.edit-course-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        editCourse(courseId);
                        closeActiveMenu();
                    });
                });
                
                // Add event listeners for delete course buttons
                coursesGrid.querySelectorAll('.delete-course-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        moveCourseToRecycleBin(courseId);
                        closeActiveMenu();
                    });
                });
                
                // Add event listeners
                coursesGrid.querySelectorAll('.play-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        startCourseById(courseId);
                    });
                });
            }
            
            function updateUpcomingClasses() {
                const today = new Date();
                let filteredClasses = [...scheduledClasses];
                
                // Apply filters
                if (currentFilter === 'biology' || currentFilter === 'chemistry' || currentFilter === 'physics') {
                    filteredClasses = filteredClasses.filter(cls => cls.subject === currentFilter);
                } else if (currentFilter === 'week') {
                    const nextWeek = new Date(today);
                    nextWeek.setDate(today.getDate() + 7);
                    filteredClasses = filteredClasses.filter(cls => {
                        const classDate = new Date(cls.date);
                        return classDate > today && classDate <= nextWeek;
                    });
                } else if (currentFilter === 'month') {
                    const nextMonth = new Date(today);
                    nextMonth.setMonth(today.getMonth() + 1);
                    filteredClasses = filteredClasses.filter(cls => {
                        const classDate = new Date(cls.date);
                        return classDate > today && classDate <= nextMonth;
                    });
                }
                
                // Sort by date
                filteredClasses.sort((a, b) => new Date(a.date) - new Date(b.date));
                
                if (filteredClasses.length === 0) {
                    upcomingClassesList.innerHTML = `
                        <div class="no-classes">
                            <i class="fas fa-calendar-times"></i>
                            <h4>No upcoming classes found</h4>
                            <p>Try changing your filters or schedule new classes</p>
                        </div>
                    `;
                    return;
                }
                
                let classesHTML = '';
                
                filteredClasses.forEach((cls, index) => {
                    const classDate = new Date(cls.date);
                    const daysUntil = Math.ceil((classDate - today) / (1000 * 60 * 60 * 24));
                    const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    
                    classesHTML += `
                        <div class="upcoming-class-item">
                            <div class="upcoming-class-date">
                                <div class="upcoming-class-day">${classDate.getDate()}</div>
                                <div class="upcoming-class-month">${monthNames[classDate.getMonth()]}</div>
                                <div class="upcoming-class-weekday">${dayNames[classDate.getDay()]}</div>
                            </div>
                            <div class="upcoming-class-details">
                                <span class="upcoming-class-subject ${cls.subject}">
                                    ${cls.subject.charAt(0).toUpperCase() + cls.subject.slice(1)}
                                </span>
                                <div class="upcoming-class-title">${cls.title}</div>
                                <div class="upcoming-class-description">${cls.description || 'No description'}</div>
                                <div class="upcoming-class-actions">
                                    <button class="class-play-btn" data-url="${cls.youtubeUrl}">
                                        <i class="fas fa-play"></i> Play Now
                                    </button>
                                    <button class="class-card-btn edit-btn" onclick="editClass(${scheduledClasses.indexOf(cls)})" style="background-color: #FF9800;">
                                        <i class="fas fa-edit"></i> Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                upcomingClassesList.innerHTML = classesHTML;
                
                // Add event listeners
                upcomingClassesList.querySelectorAll('.class-play-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        upcomingContainer.style.display = 'none';
                        showTripleView();
                    });
                });
            }
            
            function initSchedule() {
                // Set default values
                classDateInput.value = selectedDate;
                classDateInput.min = new Date().toISOString().split('T')[0];
                
                // Update displays
                updateCalendar();
                updateScheduledClasses();
                updateTodayClasses();
                
                // Activate first subject button
                document.querySelector('.subject-btn.biology').classList.add('active');
            }
            
            function initCourses() {
                // Initialize empty courses array - NO SAMPLE COURSES
                // Completely empty - user will create their own courses
                courses = [];
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                
                // Initialize empty deleted courses array
                deletedCourses = [];
                localStorage.setItem('neet-deleted-courses', JSON.stringify(deletedCourses));
            }
            
            function generateCalendar(year, month) {
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startingDay = firstDay.getDay();
                
                const monthNames = [
                    'January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'
                ];
                
                // Update month display
                calendarMonth.textContent = `${monthNames[month]} ${year}`;
                
                // Generate calendar grid
                let calendarHTML = '';
                
                // Day headers
                const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayNames.forEach(day => {
                    calendarHTML += `<div class="calendar-day-header">${day}</div>`;
                });
                
                // Empty cells for days before the first day
                for (let i = 0; i < startingDay; i++) {
                    calendarHTML += `<div class="calendar-day other-month"></div>`;
                }
                
                // Days of the month
                const today = new Date();
                const todayString = today.toISOString().split('T')[0];
                
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const hasClass = scheduledClasses.some(cls => cls.date === dateString);
                    const isToday = dateString === todayString;
                    const isSelected = dateString === selectedDate;
                    
                    let classNames = 'calendar-day';
                    if (hasClass) classNames += ' has-class';
                    if (isToday) classNames += ' today';
                    if (isSelected) classNames += ' active';
                    
                    calendarHTML += `
                        <div class="${classNames}" data-date="${dateString}">
                            ${day}
                        </div>
                    `;
                }
                
                calendarGrid.innerHTML = calendarHTML;
                
                // Add click event to calendar days
                calendarGrid.querySelectorAll('.calendar-day:not(.other-month)').forEach(day => {
                    day.addEventListener('click', function() {
                        const date = this.getAttribute('data-date');
                        selectedDate = date;
                        classDateInput.value = date;
                        
                        // Update active state
                        calendarGrid.querySelectorAll('.calendar-day').forEach(d => {
                            d.classList.remove('active');
                        });
                        this.classList.add('active');
                        
                        updateScheduledClasses();
                    });
                });
            }
            
            function updateCalendar() {
                const year = currentCalendarDate.getFullYear();
                const month = currentCalendarDate.getMonth();
                generateCalendar(year, month);
            }
            
            function updateScheduledClasses(showAll = false) {
                // Filter classes for selected date if not showing all
                let dateClasses = scheduledClasses;
                if (!showAll) {
                    dateClasses = scheduledClasses.filter(cls => cls.date === selectedDate);
                }
                
                // Sort all classes by date
                dateClasses.sort((a, b) => new Date(a.date) - new Date(b.date));
                
                if (dateClasses.length === 0) {
                    const message = showAll ? 
                        'No classes scheduled yet. Schedule a class to get started.' : 
                        'No classes scheduled for this date. Schedule a class using the form on the left.';
                    
                    scheduledClassesList.innerHTML = `
                        <div class="no-classes">
                            <i class="fas fa-calendar-plus"></i>
                            <h4>${showAll ? 'No Classes Found' : 'No classes scheduled for this date'}</h4>
                            <p>${message}</p>
                        </div>
                    `;
                    return;
                }
                
                let classesHTML = '';
                
                dateClasses.forEach((cls, index) => {
                    const videoId = extractYouTubeId(cls.youtubeUrl);
                    const thumbnailUrl = videoId ? `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : '';
                    const classDate = new Date(cls.date);
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);
                    const isPastClass = classDate < today;
                    
                    classesHTML += `
                        <div class="class-item" data-index="${index}">
                            <div class="class-menu">
                                <button class="class-menu-toggle">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="class-menu-dropdown">
                                    <button class="class-menu-item start-class-btn" data-url="${cls.youtubeUrl}">
                                        <i class="fas fa-play"></i> Start Class
                                    </button>
                                    <button class="class-menu-item edit-class-btn" data-index="${index}">
                                        <i class="fas fa-edit"></i> Edit Class
                                    </button>
                                    <button class="class-menu-item delete delete-class-btn" data-index="${index}">
                                        <i class="fas fa-trash"></i> Delete Class
                                    </button>
                                </div>
                            </div>
                            <div class="class-header">
                                <div class="class-date">${formatDate(cls.date)} ${isPastClass ? '(Past)' : ''}</div>
                                <span class="class-subject ${cls.subject}">
                                    ${cls.subject.charAt(0).toUpperCase() + cls.subject.slice(1)}
                                </span>
                            </div>
                            <div class="class-title">${cls.title}</div>
                            ${cls.description ? `<div class="class-description">${cls.description}</div>` : ''}
                            ${thumbnailUrl ? `
                                <div class="class-video">
                                    <img src="${thumbnailUrl}" alt="Video thumbnail" class="class-video-thumbnail" data-url="${cls.youtubeUrl}">
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                scheduledClassesList.innerHTML = classesHTML;
                
                // Add event listeners for menu toggles
                scheduledClassesList.querySelectorAll('.class-menu-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleMenu(this);
                    });
                });
                
                // Add event listeners for start class buttons
                scheduledClassesList.querySelectorAll('.start-class-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        closeActiveMenu();
                    });
                });
                
                // Add event listeners for edit class buttons
                scheduledClassesList.querySelectorAll('.edit-class-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        editClass(index);
                        closeActiveMenu();
                    });
                });
                
                // Add event listeners for delete class buttons
                scheduledClassesList.querySelectorAll('.delete-class-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        deleteClass(index);
                        closeActiveMenu();
                    });
                });
                
                scheduledClassesList.querySelectorAll('.class-video-thumbnail').forEach(img => {
                    img.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                    });
                });
            }
            
            function updateTodayClasses() {
                const today = new Date().toISOString().split('T')[0];
                const todayClasses = scheduledClasses.filter(cls => cls.date === today);
                
                if (todayClasses.length === 0) {
                    todayClassesList.innerHTML = `
                        <div class="no-classes">
                            <i class="fas fa-book"></i>
                            <p>No classes scheduled for today</p>
                        </div>
                    `;
                    return;
                }
                
                let todayHTML = '';
                
                todayClasses.forEach((cls, index) => {
                    todayHTML += `
                        <div class="class-item" data-index="${index}">
                            <div class="class-header">
                                <div class="class-title" style="margin-bottom: 0;">${cls.title}</div>
                                <span class="class-subject ${cls.subject}">
                                    ${cls.subject.charAt(0).toUpperCase() + cls.subject.slice(1)}
                                </span>
                            </div>
                            ${cls.description ? `<div class="class-description">${cls.description}</div>` : ''}
                            <button class="class-play-btn" data-url="${cls.youtubeUrl}" style="width: 100%;">
                                <i class="fas fa-play"></i> Start Today's Class
                            </button>
                        </div>
                    `;
                });
                
                todayClassesList.innerHTML = todayHTML;
                
                // Add event listeners
                todayClassesList.querySelectorAll('.class-play-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                        toggleSchedule(); // Close schedule and go to main view
                    });
                });
            }
            
            function saveClass() {
                const title = classTitleInput.value.trim();
                const date = classDateInput.value;
                const youtubeUrl = youtubeUrlScheduleInput.value.trim();
                const description = classDescriptionInput.value.trim();
                
                if (!title) {
                    alert('Please enter a class title');
                    return;
                }
                
                if (!date) {
                    alert('Please select a date');
                    return;
                }
                
                if (!youtubeUrl || !isValidYouTubeUrl(youtubeUrl)) {
                    alert('Please enter a valid YouTube URL');
                    return;
                }
                
                const newClass = {
                    id: Date.now().toString(),
                    title,
                    subject: selectedSubject,
                    date,
                    youtubeUrl,
                    description,
                    createdAt: new Date().toISOString()
                };
                
                scheduledClasses.push(newClass);
                scheduledClasses.sort((a, b) => new Date(a.date) - new Date(b.date));
                
                // Save to localStorage
                localStorage.setItem('neet-schedule', JSON.stringify(scheduledClasses));
                
                // Update displays
                updateCalendar();
                updateScheduledClasses();
                updateTodayClasses();
                updateTodayDashboard();
                updateUpcomingDashboard();
                
                // Clear form
                clearClassForm();
                
                // Show success message
                alert('Class scheduled successfully!');
            }
            
            function deleteClass(index) {
                if (confirm('Are you sure you want to delete this class? This action cannot be undone.')) {
                    scheduledClasses.splice(index, 1);
                    localStorage.setItem('neet-schedule', JSON.stringify(scheduledClasses));
                    
                    updateCalendar();
                    updateScheduledClasses();
                    updateTodayClasses();
                    updateTodayDashboard();
                    updateUpcomingDashboard();
                    
                    alert('Class deleted successfully!');
                }
            }
            
            function clearClassForm() {
                classTitleInput.value = '';
                youtubeUrlScheduleInput.value = '';
                classDescriptionInput.value = '';
                
                // Reset to today's date
                selectedDate = new Date().toISOString().split('T')[0];
                classDateInput.value = selectedDate;
                
                // Reset to biology
                subjectButtons.forEach(b => b.classList.remove('active'));
                document.querySelector('.subject-btn.biology').classList.add('active');
                selectedSubject = 'biology';
            }
            
            // Global function to edit class
            window.editClass = function(index) {
                if (index < 0 || index >= scheduledClasses.length) return;
                
                const cls = scheduledClasses[index];
                editingClassIndex = index;
                
                // Fill form with class data
                editClassTitleInput.value = cls.title;
                editClassSubjectInput.value = cls.subject;
                editClassDateInput.value = cls.date;
                editClassYoutubeUrlInput.value = cls.youtubeUrl;
                editClassDescriptionInput.value = cls.description || '';
                
                // Show modal
                editClassModal.style.display = 'flex';
            };
            
            function saveEditedClass() {
                if (editingClassIndex === null) return;
                
                const title = editClassTitleInput.value.trim();
                const subject = editClassSubjectInput.value;
                const date = editClassDateInput.value;
                const youtubeUrl = editClassYoutubeUrlInput.value.trim();
                const description = editClassDescriptionInput.value.trim();
                
                if (!title) {
                    alert('Please enter a class title');
                    return;
                }
                
                if (!date) {
                    alert('Please select a date');
                    return;
                }
                
                if (!youtubeUrl || !isValidYouTubeUrl(youtubeUrl)) {
                    alert('Please enter a valid YouTube URL');
                    return;
                }
                
                // Update class
                scheduledClasses[editingClassIndex] = {
                    ...scheduledClasses[editingClassIndex],
                    title,
                    subject,
                    date,
                    youtubeUrl,
                    description
                };
                
                // Save to localStorage
                localStorage.setItem('neet-schedule', JSON.stringify(scheduledClasses));
                
                // Update displays
                updateCalendar();
                updateScheduledClasses();
                updateTodayClasses();
                updateTodayDashboard();
                updateUpcomingDashboard();
                updateUpcomingClasses();
                
                // Close modal
                editClassModal.style.display = 'none';
                editingClassIndex = null;
                
                // Show success message
                alert('Class updated successfully!');
            }
            
            function playClassVideo(url) {
                if (!url) return;
                
                // Close schedule view
                if (scheduleContainer.style.display === 'flex') toggleSchedule();
                if (upcomingContainer.style.display === 'flex') upcomingContainer.style.display = 'none';
                if (courseContainer.style.display === 'flex') courseContainer.style.display = 'none';
                if (recycleBinContainer.style.display === 'flex') recycleBinContainer.style.display = 'none';
                
                // Show triple view
                showTripleView();
                
                // Load YouTube video in main video player
                let videoId = '';
                if (url.includes('youtube.com/watch?v=')) {
                    videoId = url.split('v=')[1].split('&')[0];
                } else if (url.includes('youtu.be/')) {
                    videoId = url.split('youtu.be/')[1].split('?')[0];
                }
                
                if (videoId) {
                    currentVideo = { url, videoId };
                    currentMediaType = 'youtube';
                    
                    // Clear previous content
                    videoContainer.innerHTML = '';
                    videoControls.innerHTML = '';
                    
                    // Create YouTube embed
                    const youtubeEmbed = document.createElement('iframe');
                    youtubeEmbed.className = 'youtube-player';
                    youtubeEmbed.src = `https://www.youtube.com/embed/${videoId}?enablejsapi=1`;
                    youtubeEmbed.setAttribute('frameborder', '0');
                    youtubeEmbed.setAttribute('allowfullscreen', '');
                    youtubeEmbed.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                    videoContainer.appendChild(youtubeEmbed);
                    
                    // Clear notes editor
                    notesEditor.innerHTML = '';
                    saveBtn.disabled = true;
                }
            }
            
            // Course Creator Functions
            function createCourse() {
                const name = courseNameInput.value.trim();
                const description = courseDescriptionInput.value.trim();
                const totalLectures = parseInt(courseLecturesInput.value);
                
                if (!name) {
                    alert('Please enter a course name');
                    return;
                }
                
                if (!selectedSubject) {
                    alert('Please select a subject');
                    return;
                }
                
                const newCourse = {
                    id: Date.now().toString(),
                    name,
                    subject: selectedSubject,
                    description,
                    totalLectures,
                    lectures: [],
                    createdAt: new Date().toISOString()
                };
                
                courses.push(newCourse);
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                
                // Clear form
                courseNameInput.value = '';
                courseDescriptionInput.value = '';
                courseLecturesInput.value = '10';
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                
                alert('Course created successfully!');
            }
            
            function addLectureToCourse() {
                const courseId = selectCourseDropdown.value;
                const title = lectureTitleInput.value.trim();
                const youtubeUrl = lectureYoutubeUrlInput.value.trim();
                const description = lectureDescriptionInput.value.trim();
                
                if (!courseId) {
                    alert('Please select a course');
                    return;
                }
                
                if (!title) {
                    alert('Please enter a lecture title');
                    return;
                }
                
                if (!youtubeUrl || !isValidYouTubeUrl(youtubeUrl)) {
                    alert('Please enter a valid YouTube URL');
                    return;
                }
                
                const course = courses.find(c => c.id === courseId);
                if (!course) return;
                
                const newLecture = {
                    id: Date.now().toString(),
                    title,
                    youtubeUrl,
                    description,
                    order: course.lectures.length + 1
                };
                
                course.lectures.push(newLecture);
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                
                // Clear form
                lectureTitleInput.value = '';
                lectureYoutubeUrlInput.value = '';
                lectureDescriptionInput.value = '';
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                
                // If this course is currently viewed, update the lectures list
                if (selectedCourseId === courseId) {
                    updateCourseLecturesList(course);
                }
                
                alert('Lecture added to course successfully!');
            }
            
            function updateCourseDropdown() {
                selectCourseDropdown.innerHTML = '<option value="">Select a course</option>';
                courses.forEach(course => {
                    const option = document.createElement('option');
                    option.value = course.id;
                    option.textContent = `${course.name} (${course.subject})`;
                    selectCourseDropdown.appendChild(option);
                });
            }
            
            function updateCoursesList() {
                coursesListContainer.innerHTML = '';
                
                if (courses.length === 0) {
                    coursesListContainer.innerHTML = `
                        <div class="no-classes">
                            <i class="fas fa-graduation-cap"></i>
                            <p>No courses created yet</p>
                        </div>
                    `;
                    return;
                }
                
                courses.forEach(course => {
                    const lecturesCount = course.lectures ? course.lectures.length : 0;
                    const progress = course.totalLectures > 0 ? Math.round((lecturesCount / course.totalLectures) * 100) : 0;
                    
                    const courseItem = document.createElement('div');
                    courseItem.className = 'course-item';
                    courseItem.dataset.id = course.id;
                    
                    courseItem.innerHTML = `
                        <div class="course-menu">
                            <button class="course-menu-toggle">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <div class="course-menu-dropdown">
                                <button class="course-menu-item edit-course-btn" data-course-id="${course.id}">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="course-menu-item delete delete-course-btn" data-course-id="${course.id}">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                        <div class="course-item-header">
                            <div class="course-item-title">${course.name}</div>
                            <span class="course-item-subject ${course.subject}">
                                ${course.subject.charAt(0).toUpperCase() + course.subject.slice(1)}
                            </span>
                        </div>
                        <div class="course-item-description">${course.description || 'No description'}</div>
                        <div class="course-item-stats">
                            <span>${lecturesCount}/${course.totalLectures} lectures</span>
                            <span>${progress}% complete</span>
                        </div>
                        <div class="course-item-actions">
                            <button class="course-item-btn view-course-btn" data-course-id="${course.id}" style="background-color: var(--primary-color); color: white;">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                    `;
                    
                    // Add event listeners for menu toggle
                    const menuToggle = courseItem.querySelector('.course-menu-toggle');
                    menuToggle.addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleMenu(this);
                    });
                    
                    // Edit button in menu
                    const editBtn = courseItem.querySelector('.edit-course-btn');
                    editBtn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        editCourse(courseId);
                        closeActiveMenu();
                    });
                    
                    // Delete button in menu
                    const deleteBtn = courseItem.querySelector('.delete-course-btn');
                    deleteBtn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        moveCourseToRecycleBin(courseId);
                        closeActiveMenu();
                    });
                    
                    // View button
                    courseItem.querySelector('.view-course-btn').addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        
                        // Remove active class from all items
                        document.querySelectorAll('.course-item').forEach(item => {
                            item.classList.remove('active');
                        });
                        // Add active class to clicked item
                        courseItem.classList.add('active');
                        
                        // Show course viewer
                        showCourseViewer(courseId);
                    });
                    
                    coursesListContainer.appendChild(courseItem);
                });
            }
            
            function editCourse(courseId) {
                const course = courses.find(c => c.id === courseId);
                if (!course) return;
                
                editingCourseId = courseId;
                
                // Fill form with course data
                editCourseNameInput.value = course.name;
                editCourseSubjectInput.value = course.subject;
                editCourseDescriptionInput.value = course.description || '';
                editCourseTotalLecturesInput.value = course.totalLectures;
                
                // Show modal
                editCourseModal.style.display = 'flex';
            }
            
            function saveEditedCourse() {
                if (!editingCourseId) return;
                
                const course = courses.find(c => c.id === editingCourseId);
                if (!course) return;
                
                const name = editCourseNameInput.value.trim();
                const subject = editCourseSubjectInput.value;
                const description = editCourseDescriptionInput.value.trim();
                const totalLectures = parseInt(editCourseTotalLecturesInput.value);
                
                if (!name) {
                    alert('Please enter a course name');
                    return;
                }
                
                // Update course
                course.name = name;
                course.subject = subject;
                course.description = description;
                course.totalLectures = totalLectures;
                
                // Save to localStorage
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                
                // Close modal
                editCourseModal.style.display = 'none';
                editingCourseId = null;
                
                // Show success message
                alert('Course updated successfully!');
            }
            
            function moveCourseToRecycleBin(courseId) {
                if (!confirm('Are you sure you want to move this course to recycle bin? You can restore it later.')) {
                    return;
                }
                
                const index = courses.findIndex(c => c.id === courseId);
                if (index === -1) return;
                
                const course = courses[index];
                
                // Add deletion timestamp
                course.deletedAt = new Date().toISOString();
                
                // Move to deleted courses
                deletedCourses.push(course);
                courses.splice(index, 1);
                
                // Save to localStorage
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                localStorage.setItem('neet-deleted-courses', JSON.stringify(deletedCourses));
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                
                // If this course was selected, clear the viewer
                if (selectedCourseId === courseId) {
                    selectedCourseId = null;
                    document.querySelector('.course-list').style.display = 'block';
                    courseViewer.style.display = 'none';
                }
                
                alert('Course moved to recycle bin successfully!');
            }
            
            function restoreCourse(courseId) {
                const index = deletedCourses.findIndex(c => c.id === courseId);
                if (index === -1) return;
                
                const course = deletedCourses[index];
                
                // Remove deletion timestamp
                delete course.deletedAt;
                
                // Move back to courses
                courses.push(course);
                deletedCourses.splice(index, 1);
                
                // Save to localStorage
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                localStorage.setItem('neet-deleted-courses', JSON.stringify(deletedCourses));
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                updateRecycleBin();
                
                alert('Course restored successfully!');
            }
            
            function permanentlyDeleteCourse(courseId) {
                if (!confirm('Are you sure you want to permanently delete this course? This action cannot be undone.')) {
                    return;
                }
                
                const index = deletedCourses.findIndex(c => c.id === courseId);
                if (index === -1) return;
                
                deletedCourses.splice(index, 1);
                localStorage.setItem('neet-deleted-courses', JSON.stringify(deletedCourses));
                
                updateRecycleBin();
                
                alert('Course permanently deleted!');
            }
            
            function updateRecycleBin() {
                if (deletedCourses.length === 0) {
                    recycleBinList.innerHTML = `
                        <div class="recycle-bin-empty">
                            <i class="fas fa-trash"></i>
                            <h4>Recycle Bin is Empty</h4>
                            <p>Deleted courses will appear here</p>
                        </div>
                    `;
                    return;
                }
                
                let recycleBinHTML = '';
                
                deletedCourses.forEach(course => {
                    const lecturesCount = course.lectures ? course.lectures.length : 0;
                    const deletedDate = new Date(course.deletedAt);
                    const daysAgo = Math.floor((new Date() - deletedDate) / (1000 * 60 * 60 * 24));
                    
                    recycleBinHTML += `
                        <div class="deleted-course-item">
                            <div class="deleted-course-details">
                                <div class="deleted-course-name">${course.name}</div>
                                <div class="deleted-course-info">
                                    <span>${course.subject.charAt(0).toUpperCase() + course.subject.slice(1)}</span>
                                    <span>${lecturesCount} lectures</span>
                                    <span>Deleted ${daysAgo} day${daysAgo !== 1 ? 's' : ''} ago</span>
                                </div>
                            </div>
                            <div class="deleted-course-actions">
                                <button class="restore-btn" data-course-id="${course.id}">
                                    <i class="fas fa-undo"></i> Restore
                                </button>
                                <button class="permanent-delete-btn" data-course-id="${course.id}">
                                    <i class="fas fa-trash"></i> Delete Permanently
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                recycleBinList.innerHTML = recycleBinHTML;
                
                // Add event listeners for restore buttons
                recycleBinList.querySelectorAll('.restore-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        restoreCourse(courseId);
                    });
                });
                
                // Add event listeners for permanent delete buttons
                recycleBinList.querySelectorAll('.permanent-delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const courseId = this.getAttribute('data-course-id');
                        permanentlyDeleteCourse(courseId);
                    });
                });
            }
            
            function showCourseViewer(courseId) {
                const course = courses.find(c => c.id === courseId);
                if (!course) return;
                
                selectedCourseId = courseId;
                viewerCourseTitle.innerHTML = `<i class="fas fa-play-circle"></i> ${course.name}`;
                
                // Show course viewer
                document.querySelector('.course-list').style.display = 'none';
                courseViewer.style.display = 'block';
                
                // Update lectures list
                updateCourseLecturesList(course);
            }
            
            function updateCourseLecturesList(course) {
                courseLecturesList.innerHTML = '';
                
                if (!course.lectures || course.lectures.length === 0) {
                    courseLecturesList.innerHTML = `
                        <div class="no-classes">
                            <i class="fas fa-video-slash"></i>
                            <p>No lectures added to this course yet</p>
                        </div>
                    `;
                    return;
                }
                
                // Sort lectures by order
                const sortedLectures = [...course.lectures].sort((a, b) => a.order - b.order);
                
                sortedLectures.forEach((lecture, index) => {
                    const lectureItem = document.createElement('div');
                    lectureItem.className = 'lecture-item';
                    lectureItem.dataset.lectureId = lecture.id;
                    
                    lectureItem.innerHTML = `
                        <div class="lecture-menu">
                            <button class="lecture-menu-toggle">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <div class="lecture-menu-dropdown">
                                <button class="lecture-menu-item edit-lecture-btn" data-lecture-id="${lecture.id}" data-course-id="${course.id}">
                                    <i class="fas fa-edit"></i> Edit Lecture
                                </button>
                                <button class="lecture-menu-item delete delete-lecture-btn" data-lecture-id="${lecture.id}" data-course-id="${course.id}">
                                    <i class="fas fa-trash"></i> Delete Lecture
                                </button>
                            </div>
                        </div>
                        <div class="lecture-number">${index + 1}</div>
                        <div class="lecture-details">
                            <div class="lecture-title">${lecture.title}</div>
                            <div class="lecture-description">${lecture.description || 'No description'}</div>
                        </div>
                        <div class="lecture-actions">
                            <button class="lecture-play-btn" data-url="${lecture.youtubeUrl}">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    `;
                    
                    // Add event listeners for menu toggle
                    const menuToggle = lectureItem.querySelector('.lecture-menu-toggle');
                    menuToggle.addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleMenu(this);
                    });
                    
                    // Edit button in menu
                    const editBtn = lectureItem.querySelector('.edit-lecture-btn');
                    editBtn.addEventListener('click', function() {
                        const lectureId = this.getAttribute('data-lecture-id');
                        const courseId = this.getAttribute('data-course-id');
                        editLecture(courseId, lectureId);
                        closeActiveMenu();
                    });
                    
                    // Delete button in menu
                    const deleteBtn = lectureItem.querySelector('.delete-lecture-btn');
                    deleteBtn.addEventListener('click', function() {
                        const lectureId = this.getAttribute('data-lecture-id');
                        const courseId = this.getAttribute('data-course-id');
                        deleteLecture(courseId, lectureId);
                        closeActiveMenu();
                    });
                    
                    // Play button
                    lectureItem.querySelector('.lecture-play-btn').addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        playClassVideo(url);
                    });
                    
                    courseLecturesList.appendChild(lectureItem);
                });
            }
            
            function editLecture(courseId, lectureId) {
                const course = courses.find(c => c.id === courseId);
                if (!course || !course.lectures) return;
                
                const lecture = course.lectures.find(l => l.id === lectureId);
                if (!lecture) return;
                
                editingLectureId = lectureId;
                editingLectureCourseId = courseId;
                
                // Fill form with lecture data
                editLectureTitleInput.value = lecture.title;
                editLectureYoutubeUrlInput.value = lecture.youtubeUrl;
                editLectureDescriptionInput.value = lecture.description || '';
                
                // Show modal
                editLectureModal.style.display = 'flex';
            }
            
            function saveEditedLecture() {
                if (!editingLectureId || !editingLectureCourseId) return;
                
                const course = courses.find(c => c.id === editingLectureCourseId);
                if (!course || !course.lectures) return;
                
                const lectureIndex = course.lectures.findIndex(l => l.id === editingLectureId);
                if (lectureIndex === -1) return;
                
                const title = editLectureTitleInput.value.trim();
                const youtubeUrl = editLectureYoutubeUrlInput.value.trim();
                const description = editLectureDescriptionInput.value.trim();
                
                if (!title) {
                    alert('Please enter a lecture title');
                    return;
                }
                
                if (!youtubeUrl || !isValidYouTubeUrl(youtubeUrl)) {
                    alert('Please enter a valid YouTube URL');
                    return;
                }
                
                // Update lecture
                course.lectures[lectureIndex] = {
                    ...course.lectures[lectureIndex],
                    title,
                    youtubeUrl,
                    description
                };
                
                // Save to localStorage
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                
                // If this course is currently viewed, update the lectures list
                if (selectedCourseId === editingLectureCourseId) {
                    updateCourseLecturesList(course);
                }
                
                // Close modal
                editLectureModal.style.display = 'none';
                editingLectureId = null;
                editingLectureCourseId = null;
                
                // Show success message
                alert('Lecture updated successfully!');
            }
            
            function deleteLecture(courseId, lectureId) {
                if (!confirm('Are you sure you want to delete this lecture? This action cannot be undone.')) {
                    return;
                }
                
                const course = courses.find(c => c.id === courseId);
                if (!course || !course.lectures) return;
                
                const lectureIndex = course.lectures.findIndex(l => l.id === lectureId);
                if (lectureIndex === -1) return;
                
                course.lectures.splice(lectureIndex, 1);
                
                // Reorder remaining lectures
                course.lectures.forEach((lecture, index) => {
                    lecture.order = index + 1;
                });
                
                localStorage.setItem('neet-courses', JSON.stringify(courses));
                
                // Update displays
                updateCourseDropdown();
                updateCoursesList();
                updateCoursesDashboard();
                
                // If this course is currently viewed, update the lectures list
                if (selectedCourseId === courseId) {
                    updateCourseLecturesList(course);
                }
                
                alert('Lecture deleted successfully!');
            }
            
            function startCourse() {
                if (!selectedCourseId) return;
                
                const course = courses.find(c => c.id === selectedCourseId);
                if (!course || !course.lectures || course.lectures.length === 0) {
                    alert('No lectures in this course to start');
                    return;
                }
                
                // Sort lectures by order
                const sortedLectures = [...course.lectures].sort((a, b) => a.order - b.order);
                
                // Play first lecture
                playClassVideo(sortedLectures[0].youtubeUrl);
                courseContainer.style.display = 'none';
                showTripleView();
            }
            
            function startCourseById(courseId) {
                const course = courses.find(c => c.id === courseId);
                if (!course || !course.lectures || course.lectures.length === 0) {
                    alert('No lectures in this course to start');
                    return;
                }
                
                // Sort lectures by order
                const sortedLectures = [...course.lectures].sort((a, b) => a.order - b.order);
                
                // Play first lecture
                playClassVideo(sortedLectures[0].youtubeUrl);
                showTripleView();
            }
            
            function extractYouTubeId(url) {
                if (!url) return '';
                
                let videoId = '';
                if (url.includes('youtube.com/watch?v=')) {
                    videoId = url.split('v=')[1].split('&')[0];
                } else if (url.includes('youtu.be/')) {
                    videoId = url.split('youtu.be/')[1].split('?')[0];
                }
                return videoId;
            }
            
            function isValidYouTubeUrl(url) {
                return url.includes('youtube.com/watch?v=') || url.includes('youtu.be/');
            }
            
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            }
            
            function formatTime(dateString) {
                const date = new Date(dateString);
                return date.toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            }
            
            function toggleSchedule() {
                if (scheduleContainer.style.display === 'flex') {
                    scheduleContainer.style.display = 'none';
                } else {
                    scheduleContainer.style.display = 'flex';
                    updateTodayClasses();
                    updateCalendar();
                    updateScheduledClasses();
                }
            }
            
            function setupPanelResizing() {
                // PDF panel resizing
                let isPdfResizing = false;
                let startPdfX, startPdfWidth;
                
                pdfResizeHandle.addEventListener('mousedown', (e) => {
                    isPdfResizing = true;
                    startPdfX = e.clientX;
                    startPdfWidth = parseInt(document.defaultView.getComputedStyle(pdfContainer).width, 10);
                    document.body.style.userSelect = 'none'; // Prevent text selection during resize
                    e.preventDefault();
                });
                
                document.addEventListener('mousemove', (e) => {
                    if (!isPdfResizing) return;
                    const width = startPdfWidth + (startPdfX - e.clientX);
                    const containerWidth = document.querySelector('.triple-view').offsetWidth;
                    const percentage = Math.min(Math.max((width / containerWidth) * 100, 20), 60);
                    document.documentElement.style.setProperty('--pdf-width', `${percentage}%`);
                });
                
                document.addEventListener('mouseup', () => {
                    isPdfResizing = false;
                    document.body.style.userSelect = '';
                });
                
                // Video panel resizing
                let isVideoResizing = false;
                let startVideoY, startVideoHeight;
                
                videoResizeHandle.addEventListener('mousedown', (e) => {
                    isVideoResizing = true;
                    startVideoY = e.clientY;
                    startVideoHeight = parseInt(document.defaultView.getComputedStyle(videoContainer).height, 10);
                    document.body.style.userSelect = 'none'; // Prevent text selection during resize
                    e.preventDefault();
                });
                
                document.addEventListener('mousemove', (e) => {
                    if (!isVideoResizing) return;
                    const height = startVideoHeight + (startVideoY - e.clientY);
                    const containerHeight = document.querySelector('.video-notes-split').offsetHeight;
                    const percentage = Math.min(Math.max((height / containerHeight) * 100, 30), 80);
                    document.documentElement.style.setProperty('--video-height', `${percentage}%`);
                });
                
                document.addEventListener('mouseup', () => {
                    isVideoResizing = false;
                    document.body.style.userSelect = '';
                });
            }
            
            function flipLayout() {
                const tripleView = document.querySelector('.triple-view');
                if (isLayoutFlipped) {
                    tripleView.style.flexDirection = 'row-reverse';
                } else {
                    tripleView.style.flexDirection = 'row';
                }
            }
            
            function toggleSidebar() {
                sidebar.classList.toggle('sidebar-hidden');
            }
            
            function applyTheme(theme) {
                document.body.className = `theme-${theme}`;
            }
            
            function applyFont(font) {
                document.body.classList.remove(
                    'font-patrick-hand', 
                    'font-kalam',
                    'font-bold'
                );
                
                document.body.classList.add(`font-${font}`);
            }
            
            function toggleFullscreenMode() {
                isFullscreenMode = !isFullscreenMode;
                fullscreenToggle.classList.toggle('active');
                
                if (isFullscreenMode) {
                    document.body.classList.add('fullscreen-mode');
                    document.documentElement.requestFullscreen().catch(err => {
                        console.error('Error attempting to enable fullscreen:', err);
                    });
                } else {
                    document.body.classList.remove('fullscreen-mode');
                    if (document.fullscreenElement) {
                        document.exitFullscreen();
                    }
                }
            }
            
            function loadPdf(file) {
                currentPdf = file;
                currentMediaType = 'pdf';
                currentNoteId = null;
                
                // Clear previous content
                pdfContainer.innerHTML = '';
                pdfControls.innerHTML = '';
                
                // Create PDF viewer
                const pdfViewer = document.createElement('iframe');
                pdfViewer.className = 'pdf-iframe';
                pdfViewer.src = URL.createObjectURL(file);
                pdfContainer.appendChild(pdfViewer);
                
                // Show fullscreen button
                pdfFullscreenBtn.style.display = 'block';
                
                // Clear notes editor
                notesEditor.innerHTML = '';
                saveBtn.disabled = true;
            }
            
            function loadVideo(file) {
                currentVideo = file;
                currentMediaType = 'video';
                currentNoteId = null;
                
                // Clear previous content
                videoContainer.innerHTML = '';
                videoControls.innerHTML = '';
                
                // Create video player
                const videoPlayer = document.createElement('video');
                videoPlayer.className = 'video-player';
                videoPlayer.src = URL.createObjectURL(file);
                videoPlayer.controls = true;
                videoContainer.appendChild(videoPlayer);
                
                // Clear notes editor
                notesEditor.innerHTML = '';
                saveBtn.disabled = true;
            }
            
            function loadYouTubeVideo() {
                const url = youtubeUrlInput.value.trim();
                if (!url) return;
                
                // Simple URL validation
                let videoId = '';
                if (url.includes('youtube.com/watch?v=')) {
                    videoId = url.split('v=')[1].split('&')[0];
                } else if (url.includes('youtu.be/')) {
                    videoId = url.split('youtu.be/')[1].split('?')[0];
                } else {
                    alert('Please enter a valid YouTube URL');
                    return;
                }
                
                currentVideo = { url, videoId };
                currentMediaType = 'youtube';
                currentNoteId = null;
                
                // Clear previous content
                videoContainer.innerHTML = '';
                videoControls.innerHTML = '';
                
                // Create YouTube embed
                const youtubeEmbed = document.createElement('iframe');
                youtubeEmbed.className = 'youtube-player';
                youtubeEmbed.src = `https://www.youtube.com/embed/${videoId}?enablejsapi=1`;
                youtubeEmbed.setAttribute('frameborder', '0');
                youtubeEmbed.setAttribute('allowfullscreen', '');
                youtubeEmbed.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                videoContainer.appendChild(youtubeEmbed);
                
                // Clear notes editor
                notesEditor.innerHTML = '';
                saveBtn.disabled = true;
                
                // Close modal
                youtubeModal.style.display = 'none';
                youtubeUrlInput.value = '';
            }
            
            function enterPdfFullscreen() {
                // FIX: Check if PDF is loaded, not currentMediaType
                const pdfViewer = pdfContainer.querySelector('.pdf-iframe');
                if (!pdfViewer) return;
                
                pdfFullscreen.style.display = 'flex';
                
                // Clone the PDF content
                if (pdfViewer) {
                    const clone = pdfViewer.cloneNode(true);
                    clone.style.width = '100%';
                    clone.style.height = '100%';
                    pdfFullscreenContent.innerHTML = '';
                    pdfFullscreenContent.appendChild(clone);
                }
            }
            
            function exitFullscreen(type) {
                if (type === 'pdf') {
                    pdfFullscreen.style.display = 'none';
                    pdfFullscreenContent.innerHTML = '';
                }
            }
            
            function saveNotes() {
                const title = noteTitleInput.value.trim();
                const subject = noteSubjectInput.value.trim();
                const content = notesEditor.innerHTML;
                
                if (!title) {
                    alert('Please enter a title for your notes');
                    return;
                }
                
                const now = new Date();
                const timestamp = now.toISOString();
                const formattedDate = now.toLocaleString();
                
                // Create note object
                const note = {
                    id: currentNoteId || Date.now().toString(),
                    title,
                    subject,
                    content,
                    mediaType: currentMediaType,
                    pdfInfo: currentPdf,
                    videoInfo: currentVideo,
                    timestamp,
                    formattedDate
                };
                
                // Update or add note
                if (currentNoteId) {
                    const index = savedNotes.findIndex(n => n.id === currentNoteId);
                    if (index !== -1) {
                        savedNotes[index] = note;
                    }
                } else {
                    savedNotes.unshift(note);
                }
                
                // Save to localStorage
                localStorage.setItem('studymate-notes', JSON.stringify(savedNotes));
                
                // Update UI
                updateSavedNotesList();
                saveModal.style.display = 'none';
                saveBtn.disabled = true;
                noteTitleInput.value = '';
                noteSubjectInput.value = '';
                
                // Set currentNoteId for future updates
                currentNoteId = note.id;
            }
            
            function updateSavedNotesList() {
                savedNotesList.innerHTML = '';
                
                if (savedNotes.length === 0) {
                    const emptyMsg = document.createElement('div');
                    emptyMsg.textContent = 'No saved notes yet';
                    emptyMsg.style.padding = '10px';
                    emptyMsg.style.color = 'var(--text-color)';
                    emptyMsg.style.opacity = '0.7';
                    savedNotesList.appendChild(emptyMsg);
                    return;
                }
                
                savedNotes.forEach(note => {
                    const noteItem = document.createElement('div');
                    noteItem.className = 'saved-note-item';
                    noteItem.dataset.id = note.id;
                    
                    const noteInfo = document.createElement('div');
                    noteInfo.innerHTML = `
                        <strong>${note.title}</strong><br>
                        <small>${note.subject || 'No subject'}  ${note.formattedDate}</small>
                    `;
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'item-delete';
                    deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        deleteNote(note.id);
                    });
                    
                    noteItem.appendChild(noteInfo);
                    noteItem.appendChild(deleteBtn);
                    
                    noteItem.addEventListener('click', () => {
                        loadSavedNote(note);
                    });
                    
                    savedNotesList.appendChild(noteItem);
                });
            }
            
            function loadSavedNote(note) {
                currentNoteId = note.id;
                currentMediaType = note.mediaType;
                currentPdf = note.pdfInfo;
                currentVideo = note.videoInfo;
                
                // Load PDF if exists
                if (note.mediaType === 'pdf' && note.pdfInfo) {
                    pdfContainer.innerHTML = '';
                    const pdfViewer = document.createElement('iframe');
                    pdfViewer.className = 'pdf-iframe';
                    pdfViewer.src = URL.createObjectURL(new Blob([note.pdfInfo], { type: 'application/pdf' }));
                    pdfContainer.appendChild(pdfViewer);
                    pdfFullscreenBtn.style.display = 'block';
                } else {
                    pdfContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-file-pdf"></i>
                            <h3>No PDF Loaded</h3>
                        </div>
                    `;
                    pdfFullscreenBtn.style.display = 'none';
                }
                
                // Load video if exists
                if (note.mediaType === 'video' && note.videoInfo) {
                    videoContainer.innerHTML = '';
                    const videoPlayer = document.createElement('video');
                    videoPlayer.className = 'video-player';
                    videoPlayer.src = URL.createObjectURL(new Blob([note.videoInfo], { type: 'video/mp4' }));
                    videoPlayer.controls = true;
                    videoContainer.appendChild(videoPlayer);
                } else if (note.mediaType === 'youtube' && note.videoInfo) {
                    videoContainer.innerHTML = '';
                    const youtubeEmbed = document.createElement('iframe');
                    youtubeEmbed.className = 'youtube-player';
                    youtubeEmbed.src = `https://www.youtube.com/embed/${note.videoInfo.videoId}?enablejsapi=1`;
                    youtubeEmbed.setAttribute('frameborder', '0');
                    youtubeEmbed.setAttribute('allowfullscreen', '');
                    youtubeEmbed.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                    videoContainer.appendChild(youtubeEmbed);
                } else {
                    videoContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-video"></i>
                            <h3>No Video Loaded</h3>
                        </div>
                    `;
                }
                
                // Load notes content
                notesEditor.innerHTML = note.content;
                saveBtn.disabled = true;
                
                // Close sidebar
                toggleSidebar();
            }
            
            function deleteNote(noteId) {
                if (confirm('Are you sure you want to delete this note?')) {
                    savedNotes = savedNotes.filter(note => note.id !== noteId);
                    localStorage.setItem('studymate-notes', JSON.stringify(savedNotes));
                    
                    if (currentNoteId === noteId) {
                        currentNoteId = null;
                        notesEditor.innerHTML = '';
                        saveBtn.disabled = true;
                    }
                    
                    updateSavedNotesList();
                }
            }
        });
    </script>
</body>
</html>